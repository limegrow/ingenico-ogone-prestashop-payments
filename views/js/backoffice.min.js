"use strict";const Ingenico={init:function(){if($(".ingenico-header .switch.test-live-toggle").click(function(e){if($(".ingenico-header .switch.test-live-toggle input:checked").length>0){var n=!0;if(["connection_live_pspid","connection_live_signature","connection_live_dl_user","connection_live_dl_password"].forEach(function(e,t,o){let a=$('[name="'+e+'"]');0!==a.length&&0!==a.val().length||(n=!1)}),!n)return Ingenico.openModal("credentials-live-validation-modal"),e.preventDefault(),!1;$("[name=connection_mode]").val("on"),$(".ingenico-header, .ingenico-settings").toggleClass("test").toggleClass("live"),$('[name="connection_test_pspid"],[name="connection_test_signature"],[name="connection_test_dl_user"],[name="connection_test_dl_password"]').removeProp("required"),$('[name="connection_live_pspid"],[name="connection_live_signature"],[name="connection_live_dl_user"],[name="connection_live_dl_password"]').prop("required",!0)}else $("[name=connection_mode]").val("off"),$('[name="connection_live_pspid"],[name="connection_live_signature"],[name="connection_live_dl_user"],[name="connection_live_dl_password"]').removeProp("required"),$('[name="connection_test_pspid"],[name="connection_test_signature"],[name="connection_test_dl_user"],[name="connection_test_dl_password"]').prop("required",!0)}),$(document).on("click",".ingenico-settings .modal-link",function(e){e.preventDefault();const n=$(e.target).data("modal-id");"payment-methods-list"===n&&Ingenico.getPaymentMethodModal(),Ingenico.openModal(n)}),$(document).on("click",".account-header",function(e){let n=$(this);if(n.prop("disabled"))return e.preventDefault(),!1;n.prop("disabled",!0),n.find(".collapse-btn").first().click(),setTimeout(function(){n.prop("disabled",!1)},500)}),$(document).on("click",".account-header",function(e){$(this).find("span").toggle()}),$(".modal-dialog .close, .modal-backdrop, .ingenico-modal").click(function(e){Ingenico.hasSomeParentTheClass(e.target,"modal-dialog")&&!Ingenico.hasSomeParentTheClass(e.target,"close")||(e.preventDefault(),Ingenico.closeModal())}),$(".switch > input").click(function(e){if($(this).hasClass("disabled"))return e.preventDefault(),!1}),$(".switch > input").change(function(){let e=$(this).data("toggle-name"),n=$(this).data("toggle-reverse");$(this).is(":checked")?1===parseInt(n)?$("."+e).slideUp():$("."+e).slideDown():1===parseInt(n)?$("."+e).slideDown():$("."+e).slideUp()}),$(".radio > input").change(function(){let e=$(this).val(),n=$(this).data("toggle-name");$("."+n).slideUp(),$("."+n+e).slideDown(),n+e==="paymentpage_typeINLINE"?($("#template_manager").click(),$("[name=paymentpage_template_name]").hide()):$("[name=paymentpage_template_name]").show()}),$("[name=paymentpage_type]").change(function(){"REDIRECT"===$(this).val()?($(".step1.inline").hide(),$(".step1.redirect").show(),$(".ppt.inline").hide(),$(".ppt.redirect").show()):"INLINE"===$(this).val()&&($(".step1.redirect").hide(),$(".step1.inline").show(),$(".ppt.redirect").hide(),$(".ppt.inline").show())}),$(".toggle-field").click(function(e){e.preventDefault(),Ingenico.closeModal()}),$(".country-list").keyup(function(){var e=$(this).val();Ingenico.filterCountries(e)}),$(".payment-methods-list").keyup(function(){var e=$(this).val();Ingenico.filterPaymentMethods(e)}),$(document).on("click","#export-settings",function(e){e.preventDefault(),$("#submitExportSettings").click()}),$(document).on("change","input[type=file]#support-import",function(e){const n=$("input[type=file]#support-import").val().split("\\").pop();$("#support .upload-label").html(n)}),$(document).on("click","#modalImportSettings",function(e){e.preventDefault(),Ingenico.openModal("upload-confirmation-modal")}),$(document).on("click","#submitModalImportSettings",function(e){e.preventDefault(),$("#submitImportSettings").click()}),$(document).on("click","[name=submit_save_payments]",function(e){e.preventDefault(),Ingenico.getModalPaymentMethods(function(e){(e.includes("afterpay")||e.includes("klarna"))&&Ingenico.openModal("openinvoice-choose-country-modal"),Ingenico.addPaymentMethod()})}),$(document).on("click",'#payment-methods-list input[name="payment_methods[]"]',function(e){Ingenico.getSelectedPaymentMethods(function(e){Ingenico.disableAfterpayOrKlarnaMethods(e)})}),$(document).on("click","#openinvoice-choose-country-modal .apply",function(){let e=$("[name=openinvoice_country]:checked").val();""===e&&(Ingenico.removePaymentMethod("afterpay"),Ingenico.removePaymentMethod("klarna")),$("[name=generic_country]").val(e),$.ajax(ingenico_ajax_url,{method:"POST",data:{method:"set_merchant_country",country:e},dataType:"json"}).success(function(e){Ingenico.closeModal("openinvoice-choose-country-modal")})}),$(document).on("click","#openinvoice-select-payment-modal .apply",function(){window.OPENINVOICE_METHOD=$("[name=openinvoice_method]:checked").val(),Ingenico.closeModal("openinvoice-select-payment-modal",function(){Ingenico.addCountries()})}),$(document).on("keyup",".payment-methods-list",function(e){const n=$(this).val();Ingenico.filterPaymentMethods(n)}),"undefined"!=typeof installments_amount_min){$("#installments_amount_range").slider({range:!0,min:1,max:24,values:[installments_amount_min,installments_amount_max],slide:function(e,n){let t=n.values[0],o=n.values[1];$("[name=instalments_flex_instalments_min]").val(t),$("[name=instalments_flex_instalments_max]").val(o),$("#installments_amount_range .ui-slider-handle b").remove();let a=$("#installments_amount_range .ui-slider-handle");a.eq(0).append("<b class='amount left-handler'><span id='min'>"+t+"</span></b>"),a.eq(1).append("<b class='amount right-handler'><span id='max'>"+o+"</span></b>")}});let e=$("#installments_amount_range .ui-slider-handle");e.eq(0).append("<b class='amount left-handler'><span id='min'>"+installments_amount_min+"</span></b>"),e.eq(1).append("<b class='amount right-handler'><span id='max'>"+installments_amount_max+"</span></b>"),$("#installments_period_range").slider({range:!0,min:1,max:90,values:[installments_period_min,installments_period_max],slide:function(e,n){let t=n.values[0],o=n.values[1];$("[name=instalments_flex_period_min]").val(t),$("[name=instalments_flex_period_max]").val(o),$("#installments_period_range .ui-slider-handle b").remove();let a=$("#installments_period_range .ui-slider-handle");a.eq(0).append("<b class='amount left-handler'><span id='min'>"+t+"</span></b>"),a.eq(1).append("<b class='amount right-handler'><span id='max'>"+o+"</span></b>")}});let n=$("#installments_period_range .ui-slider-handle");n.eq(0).append("<b class='amount left-handler'><span id='min'>"+installments_period_min+"</span></b>"),n.eq(1).append("<b class='amount right-handler'><span id='max'>"+installments_period_max+"</span></b>"),$("#installments_first_range").slider({range:!0,min:1,max:99,values:[installments_first_min,installments_first_max],slide:function(e,n){let t=n.values[0],o=n.values[1];$("[name=instalments_flex_firstpayment_min]").val(t),$("[name=instalments_flex_firstpayment_max]").val(o),$("#installments_first_range .ui-slider-handle b").remove();let a=$("#installments_first_range .ui-slider-handle");a.eq(0).append("<b class='amount left-handler'><span id='min'>"+t+"%</span></b>"),a.eq(1).append("<b class='amount right-handler'><span id='max'>"+o+"%</span></b>")}});let t=$("#installments_first_range .ui-slider-handle");t.eq(0).append("<b class='amount left-handler'><span id='min'>"+installments_first_min+"%</span></b>"),t.eq(1).append("<b class='amount right-handler'><span id='max'>"+installments_first_max+"%</span></b>")}$(".form-btn.mask").click(function(){var e=$('[name="'+$(this).attr("toggle")+'"]');"password"==e.attr("type")?($(this).text($(this).data("hide")),e.attr("type","text")):($(this).text($(this).data("show")),e.attr("type","password"))});let e=window.location.hash;if(null!=e&&""!==e){let n=$("#content.bootstrap .ingenico-settings .form-wrapper .panel-footer");"#support"===e?n.hide():n.show(),$(".nav-tabs li").removeClass("active"),$(".tab-content .tab-pane").removeClass("active"),$('.nav-tabs li a[href="'+e+'"]').parent().addClass("active"),$(".tab-content "+e).addClass("active"),$("#configuration_form").attr("action",window.location.href),Ingenico.connectExistingAccount()}$(".nav-tabs li a").click(function(){let e=this.href.split("#")[1];window.location.hash=e,$("#configuration_form").attr("action",window.location.href);let n=$("#content.bootstrap .ingenico-settings .form-wrapper .panel-footer");"support"===e?n.hide():n.show()}),$(document).keydown(function(e){9==e.keyCode&&$(".modal-backdrop").is(":visible")&&e.preventDefault(),27==e.keyCode&&Ingenico.closeModal()});var n=$("#agreement");n.is(":checked")?$("#registration-btn").removeAttr("disabled").removeClass("disabled"):$("#registration-btn").attr("disabled","disabled").addClass("disabled"),n.click(function(){$(this).is(":checked")?$("#registration-btn").removeAttr("disabled").removeClass("disabled"):$("#registration-btn").attr("disabled","disabled").addClass("disabled")}),$("[name=submit_save_countries]").click(function(e){e.preventDefault(),Ingenico.addCountries()}),$(".paymentpage_template input[type=file]").live("change",function(){var e=$("input[type=file]").val().split("\\").pop();$(".paymentpage_template .upload-label").html(e)})},pattern:/[a-zA-Z0-9_\-\+\.]/,getRandomByte:function(){if(window.crypto&&window.crypto.getRandomValues){var e=new Uint8Array(1);return window.crypto.getRandomValues(e),e[0]}if(window.msCrypto&&window.msCrypto.getRandomValues){e=new Uint8Array(1);return window.msCrypto.getRandomValues(e),e[0]}return Math.floor(256*Math.random())},generateHash:function(e,n){let t=Array.apply(null,{length:n}).map(function(){for(var e;;)if(e=String.fromCharCode(this.getRandomByte()),this.pattern.test(e))return e},this).join("");document.getElementsByName(e)[0].value=t},copyValue:function(e,n){let t=document.createElement("textarea"),o=document.getElementsByName(e)[0].value;t.value=o,t.setAttribute("readonly",""),t.style={position:"absolute",left:"-9999px"},document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),$(".copy-response[data-copy='"+n+"']").slideDown(),setTimeout(function(){$(".copy-response[data-copy='"+n+"']").slideUp()},3e3)},copyLink:function(e,n){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style={position:"absolute",left:"-9999px"},document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),$(".copy-response[data-copy='"+n+"']").slideDown(),setTimeout(function(){$(".copy-response[data-copy='"+n+"']").slideUp()},6e3)},toggleTooltip:function(e){let n=document.getElementById(e);"none"===n.style.display?n.style.display="block":n.style.display="none"},openModal:function(e,n,t){void 0===n&&(n={}),void 0===t&&(t=function(){});let o=$("#"+e);$(window).scrollTop();return o.find(".modal-dialog").addClass("modal-dialog-scrollable"),o.modal(n),o.on("shown.bs.modal",function(){$("body").css("overflow","auto"),$("html, body").animate({scrollTop:0},"slow"),t()}),o.on("hide.bs.modal",function(){}),o},closeModal:function(e,n){let t=$(".ingenico-modal");return void 0===e&&e||(t=$("#"+e)),void 0===n&&(n=function(){}),t.modal("hide"),t.on("hide.bs.modal",function(){}),setTimeout(function(){n()},300),t},filterCountries:function(e){var n="";$('#countries-list [type="checkbox"]:checked').each(function(){n+=this.value+"|"}).promise().done(function(){$.ajax(ingenico_ajax_url,{method:"POST",data:{query:e,method:"filter_countries",selected_countries:n},dataType:"json"}).success(function(e){$("#countries-list ul").html(e)})})},filterPaymentMethods:function(e){$.ajax(ingenico_ajax_url,{method:"POST",data:{query:e,method:"filter_payment_methods"},dataType:"json"}).success(function(e){$("#payment-methods-list ul").html(e),Ingenico.getSelectedPaymentMethods(function(e){Ingenico.disableAfterpayOrKlarnaMethods(e)})})},getSelectedPaymentMethods:function(e){let n=$("#pm_list").val();Ingenico.getModalPaymentMethods(function(t){let o=n.concat(t);e(o)})},getModalPaymentMethods:function(e){let n=[];$('#payment-methods-list input[name="payment_methods[]"]:checked').each(function(){let e=$(this).val();n.push(e)}).promise().done(function(){e(n)})},disableAfterpayOrKlarnaMethods:function(e){let n=$('#payment-methods-list input[value="afterpay"]'),t=$('#payment-methods-list input[value="klarna"]'),o=$('#payment-methods-list input[name="payment_methods[]"]');e.includes("afterpay")?(n.prop("disabled",!1).removeClass("disabled"),t.prop("disabled",!0).addClass("disabled")):e.includes("klarna")?(t.prop("disabled",!1).removeClass("disabled"),n.prop("disabled",!0).addClass("disabled")):o.prop("disabled",!1).removeClass("disabled")},removePaymentMethod:function(e){$("#pm_list option[value='"+e+"']").remove(),$("li."+e).fadeOut(1e3,function(){$(this).remove()})},addPaymentMethod:function(){Ingenico.getSelectedPaymentMethods(function(e){$.ajax(ingenico_ajax_url,{method:"POST",data:{payment_methods:e,method:"fetch_payment_methods"},dataType:"json"}).success(function(e){$("#selected_payment_methods").html(e),Ingenico.closeModal("payment-methods-list")})})},getPaymentMethodModal:function(){let e=$("#pm_list").val();$.ajax(ingenico_ajax_url,{data:{method:"payment_method_modal",selected:e},dataType:"json"}).success(function(e){$("#payment-methods-list .methods-list").html(e),Ingenico.getSelectedPaymentMethods(function(e){Ingenico.disableAfterpayOrKlarnaMethods(e)})})},hasSomeParentTheClass:function(e,n){return"HTML"!==e.tagName&&(e.className.split(" ").indexOf(n)>=0||e.parentNode&&this.hasSomeParentTheClass(e.parentNode,n))},showMigrationUI:function(){$(".installation-options").hide(),$("#migration-frm").show(),$("#create-account-frm").hide(),$("#configuration_form").hide(),$(".ingenico-settings, .ingenico-header").addClass("install"),$(".account-creation-progress .progress-half").addClass("active"),$(".header-links").show(),$(".create-account.creation").hide(),$(".create-account.configuration").show(),$(".create-account-form .panel-footer").show()},createAccount:function(){$(".installation-options").hide(),$(".create-account-form").show(),$(".ingenico-settings, .ingenico-header").addClass("install"),$(".installation-view").show(),$(".settings-form").hide(),$(".account-creation-progress .progress-half").addClass("active"),$(".header-links").show(),$(".create-account.creation").hide(),$(".create-account.configuration").show(),$(".create-account-form .panel-footer").show(),$("#migration-frm").hide()},connectExistingAccount:function(){$(".installation-options").hide(),$(".settings-form").css("display","grid"),$(".ingenico-header .btn-toolbar").show(),$(".ingenico-settings, .ingenico-header").removeClass("install"),$(".installation-view").hide(),$(".registration-complete").hide(),$(".account-creation-progress, .ingenico-header").removeClass("done"),$(".header-links").show(),$(".create-account.creation").show(),$(".create-account.configuration").hide()},backToInstallation:function(e){e&&e.preventDefault(),$(".installation-view").show(),$(".installation-options").show(),$(".create-account-form").hide(),$(".account-creation-progress .progress-half").removeClass("active"),$(".header-links").show(),$(".create-account.creation").hide(),$(".create-account.configuration").show()},registerAccount:function(e){if(!($(".installation-form [name=company_name]").val().length>0&&this.validateEmail($(".installation-form [name=account_email]").val())&&$(".installation-form #agreement").is(":checked")))return!1;e.preventDefault(),$.ajax(ingenico_ajax_url,{data:{method:"register_account",account_info:$(".installation-form").serialize()},dataType:"json"}).success(function(e){$(".installation-form").hide(),$(".registration-complete").css("display","inline-block"),$(".account-creation-progress .progress-half").removeClass("active"),$(".account-creation-progress, .ingenico-header").addClass("done")})},validateEmail:function(e){return!!$.trim(e).match(/^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/)},addCountries:function(){var e=[],n=[];$("#countries-list [type=checkbox]").each(function(){if(this.checked){const t=$(this).val(),o=$(this).closest(".label-container").text();["SE","FI","DK","NO","DE","NL"].indexOf(t)>-1&&n.push(o),e.push(t)}}).promise().done(function(){if((e.indexOf("DE")>-1||e.indexOf("NL")>-1)&&void 0===window.OPENINVOICE_METHOD){let e=$("#openinvoice_selected2").html();$("#openinvoice_selected2").html(e.replace("%country%",n.join(", "))),Ingenico.closeModal(!1,function(){Ingenico.openModal("openinvoice-select-payment-modal")})}else Ingenico.fetchPaymentMethods(e,window.OPENINVOICE_METHOD)})},fetchPaymentMethods:function(e,n){return $.ajax(ingenico_ajax_url,{method:"POST",data:{countries:e,method:"fetch_methods_by_countries",openinvoice:n},dataType:"json"}).success(function(e){$("#selected_payment_methods").html(e),Ingenico.closeModal("countries-list")})},addMigrationLog:function(e){let n=$("#migration-logs");n.append(e+"\r\n"),n.scrollTop(n[0].scrollHeight-n.height())},doMigrationAction:function(e,n){return $.ajax(window.migration_ajax_url,{data:{action:e},dataType:"json"}).done(function(e){e.data.forEach(function(e,n,t){Ingenico.addMigrationLog(e)}),e.success?n(null,e):n(e.data,e)}).fail(function(e,t,o){Ingenico.addMigrationLog(JSON.stringify(o)),n(o,{})})},doMigrate:function(){async.series({step1:function(e){Ingenico.doMigrationAction("step1",e)},step2:function(e){Ingenico.doMigrationAction("step2",e)},step3:function(e){Ingenico.doMigrationAction("step3",e)},step4:function(e){Ingenico.doMigrationAction("step4",e)},step5:function(e){Ingenico.addMigrationLog("Import Aliases..."),Ingenico.doMigrationAction("aliases_info",function(n,t){var o=t.aliases,a=o.length,i=0;async.eachSeries(o,function(e,n){Ingenico.addMigrationLog("Import alias #"+e),$.ajax(window.migration_ajax_url,{data:{action:"import_alias",alias_id:e},dataType:"json"}).done(function(n){Ingenico.addMigrationLog("Alias #"+e+" was imported")}).always(function(){i++,console.log(i),console.log(a);const e=Math.floor(i/a*100);$("#aliases_progress").css("width",e+"%").attr("aria-valuenow",e),n()})},function(n){n&&console.log(n),e()})})},step6:function(e){Ingenico.doMigrationAction("finish",e)}},function(e,n){console.log(n),Ingenico.addMigrationLog("Finished")})}};$(function(){Ingenico.init()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhY2tvZmZpY2UuanMiXSwibmFtZXMiOlsiSW5nZW5pY28iLCJpbml0IiwiJCIsImNsaWNrIiwiZSIsImxlbmd0aCIsImlzVmFsaWQiLCJmb3JFYWNoIiwiaXRlbSIsImluZGV4IiwiYXJyIiwiZWwiLCJ2YWwiLCJvcGVuTW9kYWwiLCJwcmV2ZW50RGVmYXVsdCIsInRvZ2dsZUNsYXNzIiwicmVtb3ZlUHJvcCIsInByb3AiLCJkb2N1bWVudCIsIm9uIiwibW9kYWxfaWQiLCJ0YXJnZXQiLCJkYXRhIiwiZ2V0UGF5bWVudE1ldGhvZE1vZGFsIiwidGhpcyIsImZpbmQiLCJmaXJzdCIsInNldFRpbWVvdXQiLCJ0b2dnbGUiLCJoYXNTb21lUGFyZW50VGhlQ2xhc3MiLCJjbG9zZU1vZGFsIiwiaGFzQ2xhc3MiLCJjaGFuZ2UiLCJ0b2dnbGVfdGFyZ2V0IiwicmV2ZXJzZSIsImlzIiwicGFyc2VJbnQiLCJzbGlkZVVwIiwic2xpZGVEb3duIiwiaGlkZSIsInNob3ciLCJrZXl1cCIsInF1ZXJ5IiwiZmlsdGVyQ291bnRyaWVzIiwiZmlsdGVyUGF5bWVudE1ldGhvZHMiLCJmaWxlbmFtZSIsInNwbGl0IiwicG9wIiwiaHRtbCIsImdldE1vZGFsUGF5bWVudE1ldGhvZHMiLCJwYXltZW50X21ldGhvZHMiLCJpbmNsdWRlcyIsImFkZFBheW1lbnRNZXRob2QiLCJnZXRTZWxlY3RlZFBheW1lbnRNZXRob2RzIiwiZGlzYWJsZUFmdGVycGF5T3JLbGFybmFNZXRob2RzIiwic2VsZWN0ZWQiLCJyZW1vdmVQYXltZW50TWV0aG9kIiwiYWpheCIsImluZ2VuaWNvX2FqYXhfdXJsIiwibWV0aG9kIiwiY291bnRyeSIsImRhdGFUeXBlIiwic3VjY2VzcyIsIndpbmRvdyIsIk9QRU5JTlZPSUNFX01FVEhPRCIsImFkZENvdW50cmllcyIsImluc3RhbGxtZW50c19hbW91bnRfbWluIiwic2xpZGVyIiwicmFuZ2UiLCJtaW4iLCJtYXgiLCJ2YWx1ZXMiLCJpbnN0YWxsbWVudHNfYW1vdW50X21heCIsInNsaWRlIiwiZXZlbnQiLCJ1aSIsIm1pbl92YWx1ZSIsIm1heF92YWx1ZSIsInJlbW92ZSIsImhhbmRsZXIiLCJlcSIsImFwcGVuZCIsImFtb3VudF9oYW5kbGVyIiwiaW5zdGFsbG1lbnRzX3BlcmlvZF9taW4iLCJpbnN0YWxsbWVudHNfcGVyaW9kX21heCIsInBlcmlvZF9oYW5kbGVyIiwiaW5zdGFsbG1lbnRzX2ZpcnN0X21pbiIsImluc3RhbGxtZW50c19maXJzdF9tYXgiLCJmaXJzdF9oYW5kbGVyIiwiaW5wdXQiLCJhdHRyIiwidGV4dCIsImhhc2giLCJsb2NhdGlvbiIsInBhbmVsIiwicmVtb3ZlQ2xhc3MiLCJwYXJlbnQiLCJhZGRDbGFzcyIsImhyZWYiLCJjb25uZWN0RXhpc3RpbmdBY2NvdW50Iiwia2V5ZG93biIsImtleUNvZGUiLCJ0aGVfdGVybXMiLCJyZW1vdmVBdHRyIiwibGl2ZSIsInBhdHRlcm4iLCJnZXRSYW5kb21CeXRlIiwiY3J5cHRvIiwiZ2V0UmFuZG9tVmFsdWVzIiwicmVzdWx0IiwiVWludDhBcnJheSIsIm1zQ3J5cHRvIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiZ2VuZXJhdGVIYXNoIiwiZmllbGQiLCJnZW5lcmF0ZWRfaGFzaCIsIkFycmF5IiwiYXBwbHkiLCJtYXAiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJ0ZXN0Iiwiam9pbiIsImdldEVsZW1lbnRzQnlOYW1lIiwidmFsdWUiLCJjb3B5VmFsdWUiLCJjb3B5X3Jlc3BvbnNlX2NvbnRhaW5lciIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJzdHlsZSIsInBvc2l0aW9uIiwibGVmdCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsInNlbGVjdCIsImV4ZWNDb21tYW5kIiwicmVtb3ZlQ2hpbGQiLCJjb3B5TGluayIsImxpbmsiLCJ0b2dnbGVUb29sdGlwIiwidG9vbHRpcCIsIngiLCJnZXRFbGVtZW50QnlJZCIsImRpc3BsYXkiLCJvcHRpb25zIiwib25TaG93IiwiZWxtIiwic2Nyb2xsVG9wIiwibW9kYWwiLCJjc3MiLCJhbmltYXRlIiwib25DbG9zZSIsInNlbGVjdGVkX2NvdW50cmllcyIsImVhY2giLCJwcm9taXNlIiwiZG9uZSIsImNhbGxiYWNrIiwiY29uY2F0IiwicHVzaCIsImFmdGVycGF5Iiwia2xhcm5hIiwiYWxsIiwicGF5bWVudF9tZXRob2QiLCJmYWRlT3V0IiwiZWxlbWVudCIsImNsYXNzbmFtZSIsInRhZ05hbWUiLCJjbGFzc05hbWUiLCJpbmRleE9mIiwicGFyZW50Tm9kZSIsInNob3dNaWdyYXRpb25VSSIsImNyZWF0ZUFjY291bnQiLCJiYWNrVG9JbnN0YWxsYXRpb24iLCJyZWdpc3RlckFjY291bnQiLCJ2YWxpZGF0ZUVtYWlsIiwiYWNjb3VudF9pbmZvIiwic2VyaWFsaXplIiwiZW1haWwiLCJ0cmltIiwibWF0Y2giLCJjb3VudHJpZXMiLCJvcGVuaW52b2ljZV9jb3VudHJpZXMiLCJjaGVja2VkIiwiY291bnRyeV9jb2RlIiwibGFiZWwiLCJjbG9zZXN0IiwicmVwbGFjZSIsImZldGNoUGF5bWVudE1ldGhvZHMiLCJvcGVuaW52b2ljZV9tZXRob2QiLCJvcGVuaW52b2ljZSIsImFkZE1pZ3JhdGlvbkxvZyIsIm1lc3NhZ2UiLCJzY3JvbGxIZWlnaHQiLCJoZWlnaHQiLCJkb01pZ3JhdGlvbkFjdGlvbiIsImFjdGlvbiIsIm1pZ3JhdGlvbl9hamF4X3VybCIsImZhaWwiLCJqcVhIUiIsInRleHRTdGF0dXMiLCJlcnJvclRocm93biIsIkpTT04iLCJzdHJpbmdpZnkiLCJkb01pZ3JhdGUiLCJhc3luYyIsInNlcmllcyIsInN0ZXAxIiwic3RlcDIiLCJzdGVwMyIsInN0ZXA0Iiwic3RlcDUiLCJlcnIiLCJhbGlhc2VzIiwiYWxpYXNlc19jb3VudCIsImFsaWFzZXNfaW1wb3J0ZWQiLCJlYWNoU2VyaWVzIiwiYWxpYXNfaWQiLCJjYWxsYmFjazEiLCJkYXRhMSIsImFsd2F5cyIsImNvbnNvbGUiLCJsb2ciLCJ2YWx1ZTEiLCJzdGVwNiIsInJlc3VsdHMiXSwibWFwcGluZ3MiOiJBQWlCQSxhQUVBLE1BQU1BLFNBQVcsQ0FFYkMsS0FBTSxXQXdPRixHQXRPQUMsRUFBRSw2Q0FBNkNDLE1BQU0sU0FBU0MsR0FDMUQsR0FBSUYsRUFBRSwyREFBMkRHLE9BQVMsRUFBRyxDQVN6RSxJQUFJQyxHQUFVLEVBUWQsR0FmdUIsQ0FDbkIsd0JBQ0EsNEJBQ0EsMEJBQ0EsK0JBSVdDLFFBQVEsU0FBU0MsRUFBTUMsRUFBT0MsR0FDekMsSUFBSUMsRUFBS1QsRUFBRSxVQUFZTSxFQUFPLE1BQ1osSUFBZEcsRUFBR04sUUFBb0MsSUFBcEJNLEVBQUdDLE1BQU1QLFNBQzVCQyxHQUFVLE1BSWJBLEVBR0QsT0FGQU4sU0FBU2EsVUFBVSxxQ0FDbkJULEVBQUVVLGtCQUNLLEVBR1BaLEVBQUUsMEJBQTBCVSxJQUFJLE1BQ2hDVixFQUFFLHdDQUF3Q2EsWUFBWSxRQUFRQSxZQUFZLFFBRTFFYixFQUFFLDJJQUEySWMsV0FBVyxZQUN4SmQsRUFBRSwySUFBMkllLEtBQUssWUFBWSxRQUlsS2YsRUFBRSwwQkFBMEJVLElBQUksT0FDaENWLEVBQUUsMklBQTJJYyxXQUFXLFlBQ3hKZCxFQUFFLDJJQUEySWUsS0FBSyxZQUFZLEtBSXRLZixFQUFFZ0IsVUFBVUMsR0FBRyxRQUFTLGlDQUFrQyxTQUFVZixHQUNoRUEsRUFBRVUsaUJBQ0YsTUFBTU0sRUFBV2xCLEVBQUVFLEVBQUVpQixRQUFRQyxLQUFLLFlBQ2pCLHlCQUFiRixHQUNBcEIsU0FBU3VCLHdCQUdidkIsU0FBU2EsVUFBVU8sS0FHdkJsQixFQUFFZ0IsVUFBVUMsR0FBSSxRQUFTLGtCQUFtQixTQUFVZixHQUNsRCxJQUFJTyxFQUFLVCxFQUFFc0IsTUFDWCxHQUFLYixFQUFHTSxLQUFLLFlBRVQsT0FEQWIsRUFBRVUsa0JBQ0ssRUFHWEgsRUFBR00sS0FBTSxZQUFZLEdBQ3JCTixFQUFHYyxLQUFNLGlCQUFrQkMsUUFBUXZCLFFBRW5Dd0IsV0FBVyxXQUNQaEIsRUFBR00sS0FBTSxZQUFZLElBQ3RCLE9BR1BmLEVBQUVnQixVQUFVQyxHQUFJLFFBQVMsa0JBQW1CLFNBQVVmLEdBRWxERixFQUFFc0IsTUFBTUMsS0FBTSxRQUFTRyxXQUczQjFCLEVBQUUsMERBQTBEQyxNQUFNLFNBQVNDLEdBQ25FSixTQUFTNkIsc0JBQXNCekIsRUFBRWlCLE9BQVEsa0JBQ3JDckIsU0FBUzZCLHNCQUFzQnpCLEVBQUVpQixPQUFRLFdBS2pEakIsRUFBRVUsaUJBQ0ZkLFNBQVM4QixnQkFHYjVCLEVBQUUsbUJBQW1CQyxNQUFNLFNBQVVDLEdBQ2pDLEdBQUlGLEVBQUVzQixNQUFNTyxTQUFTLFlBRWpCLE9BREEzQixFQUFFVSxrQkFDSyxJQUlmWixFQUFFLG1CQUFtQjhCLE9BQU8sV0FDeEIsSUFBSUMsRUFBZ0IvQixFQUFFc0IsTUFBTUYsS0FBSyxlQUM3QlksRUFBVWhDLEVBQUVzQixNQUFNRixLQUFLLGtCQUNicEIsRUFBRXNCLE1BQU1XLEdBQUcsWUFFSyxJQUF0QkMsU0FBU0YsR0FDVGhDLEVBQUUsSUFBTStCLEdBQWVJLFVBRXZCbkMsRUFBRSxJQUFNK0IsR0FBZUssWUFHRCxJQUF0QkYsU0FBU0YsR0FDVGhDLEVBQUUsSUFBTStCLEdBQWVLLFlBRXZCcEMsRUFBRSxJQUFNK0IsR0FBZUksWUFLbkNuQyxFQUFFLGtCQUFrQjhCLE9BQU8sV0FDdkIsSUFBSXBCLEVBQU1WLEVBQUVzQixNQUFNWixNQUNkcUIsRUFBZ0IvQixFQUFFc0IsTUFBTUYsS0FBSyxlQUNqQ3BCLEVBQUUsSUFBTStCLEdBQWVJLFVBQ3ZCbkMsRUFBRSxJQUFNK0IsRUFBZ0JyQixHQUFLMEIsWUFHMUJMLEVBQWdCckIsSUFBUSwwQkFDdkJWLEVBQUUscUJBQXFCQyxRQUN2QkQsRUFBRSxvQ0FBb0NxQyxRQUV0Q3JDLEVBQUUsb0NBQW9Dc0MsU0FJOUN0QyxFQUFFLDJCQUEyQjhCLE9BQU8sV0FDVixhQUFsQjlCLEVBQUVzQixNQUFNWixPQUNSVixFQUFFLGlCQUFpQnFDLE9BQ25CckMsRUFBRSxtQkFBbUJzQyxPQUNyQnRDLEVBQUUsZUFBZXFDLE9BQ2pCckMsRUFBRSxpQkFBaUJzQyxRQUNNLFdBQWxCdEMsRUFBRXNCLE1BQU1aLFFBQ2ZWLEVBQUUsbUJBQW1CcUMsT0FDckJyQyxFQUFFLGlCQUFpQnNDLE9BQ25CdEMsRUFBRSxpQkFBaUJxQyxPQUNuQnJDLEVBQUUsZUFBZXNDLFVBSXpCdEMsRUFBRSxpQkFBaUJDLE1BQU0sU0FBU0MsR0FDOUJBLEVBQUVVLGlCQUNGZCxTQUFTOEIsZUFHYjVCLEVBQUUsaUJBQWlCdUMsTUFBTSxXQUNyQixJQUFJQyxFQUFReEMsRUFBRXNCLE1BQU1aLE1BQ3BCWixTQUFTMkMsZ0JBQWdCRCxLQUc3QnhDLEVBQUUseUJBQXlCdUMsTUFBTSxXQUM3QixJQUFJQyxFQUFReEMsRUFBRXNCLE1BQU1aLE1BQ3BCWixTQUFTNEMscUJBQXFCRixLQUlsQ3hDLEVBQUVnQixVQUFVQyxHQUFHLFFBQVMsbUJBQW9CLFNBQVVmLEdBQ2xEQSxFQUFFVSxpQkFDRlosRUFBRSx5QkFBeUJDLFVBRy9CRCxFQUFFZ0IsVUFBVUMsR0FBRyxTQUFVLGtDQUFtQyxTQUFVZixHQUNsRSxNQUFNeUMsRUFBVzNDLEVBQUUsbUNBQW1DVSxNQUFNa0MsTUFBTSxNQUFNQyxNQUN4RTdDLEVBQUUsMEJBQTBCOEMsS0FBS0gsS0FJckMzQyxFQUFFZ0IsVUFBVUMsR0FBRyxRQUFTLHVCQUF3QixTQUFVZixHQUN0REEsRUFBRVUsaUJBQ0ZkLFNBQVNhLFVBQVUsK0JBSXZCWCxFQUFFZ0IsVUFBVUMsR0FBRyxRQUFTLDZCQUE4QixTQUFVZixHQUM1REEsRUFBRVUsaUJBQ0ZaLEVBQUUseUJBQXlCQyxVQUkvQkQsRUFBRWdCLFVBQVVDLEdBQUksUUFBUyw4QkFBK0IsU0FBVWYsR0FDOURBLEVBQUVVLGlCQUVGZCxTQUFTaUQsdUJBQXVCLFNBQVVDLElBQ2xDQSxFQUFnQkMsU0FBUyxhQUFlRCxFQUFnQkMsU0FBUyxZQUVqRW5ELFNBQVNhLFVBQVUsb0NBSXZCYixTQUFTb0QsdUJBS2pCbEQsRUFBRWdCLFVBQVVDLEdBQUksUUFBUyx3REFBeUQsU0FBVWYsR0FDeEZKLFNBQVNxRCwwQkFBMEIsU0FBVUgsR0FDekNsRCxTQUFTc0QsK0JBQStCSixPQUtoRGhELEVBQUVnQixVQUFVQyxHQUFJLFFBQVMsMkNBQTRDLFdBQ2pFLElBQUlvQyxFQUFXckQsRUFBRSxzQ0FBc0NVLE1BQ3RDLEtBQWIyQyxJQUVBdkQsU0FBU3dELG9CQUFvQixZQUM3QnhELFNBQVN3RCxvQkFBb0IsV0FHakN0RCxFQUFFLDBCQUEwQlUsSUFBSTJDLEdBRWhDckQsRUFBRXVELEtBQU1DLGtCQUFtQixDQUN2QkMsT0FBVSxPQUNWckMsS0FBUSxDQUNKcUMsT0FBUSx1QkFDUkMsUUFBU0wsR0FFYk0sU0FBWSxTQUNaQyxRQUFRLFNBQVN4QyxHQUNqQnRCLFNBQVM4QixXQUFXLHdDQUs1QjVCLEVBQUVnQixVQUFVQyxHQUFJLFFBQVMsMkNBQTRDLFdBQ2pFNEMsT0FBT0MsbUJBQXFCOUQsRUFBRSxxQ0FBcUNVLE1BQ25FWixTQUFTOEIsV0FBVyxtQ0FBb0MsV0FDcEQ5QixTQUFTaUUsbUJBSWpCL0QsRUFBRWdCLFVBQVVDLEdBQUksUUFBUyx3QkFBeUIsU0FBVWYsR0FDeEQsTUFBTXNDLEVBQVF4QyxFQUFFc0IsTUFBTVosTUFDdEJaLFNBQVM0QyxxQkFBcUJGLEtBR0ssb0JBQTVCd0Isd0JBQXlDLENBQ2hEaEUsRUFBRSw4QkFBOEJpRSxPQUFPLENBQ25DQyxPQUFPLEVBQ1BDLElBQUssRUFDTEMsSUFBSyxHQUNMQyxPQUFRLENBQUNMLHdCQUF5Qk0seUJBQ2xDQyxNQUFPLFNBQVVDLEVBQU9DLEdBQ3BCLElBQUlDLEVBQVlELEVBQUdKLE9BQU8sR0FDdEJNLEVBQVlGLEVBQUdKLE9BQU8sR0FDMUJyRSxFQUFFLDJDQUEyQ1UsSUFBSWdFLEdBQ2pEMUUsRUFBRSwyQ0FBMkNVLElBQUlpRSxHQUVqRDNFLEVBQUUsa0RBQWtENEUsU0FDcEQsSUFBSUMsRUFBVTdFLEVBQUUsZ0RBQ2hCNkUsRUFBUUMsR0FBRyxHQUFHQyxPQUFPLGlEQUFtREwsRUFBWSxlQUNwRkcsRUFBUUMsR0FBRyxHQUFHQyxPQUFPLGtEQUFvREosRUFBWSxrQkFHN0YsSUFBSUssRUFBaUJoRixFQUFFLGdEQUN2QmdGLEVBQWVGLEdBQUcsR0FBR0MsT0FBTyxpREFBbURmLHdCQUEwQixlQUN6R2dCLEVBQWVGLEdBQUcsR0FBR0MsT0FBTyxrREFBb0RULHdCQUEwQixlQUUxR3RFLEVBQUUsOEJBQThCaUUsT0FBTyxDQUNuQ0MsT0FBTyxFQUNQQyxJQUFLLEVBQ0xDLElBQUssR0FDTEMsT0FBUSxDQUFDWSx3QkFBeUJDLHlCQUNsQ1gsTUFBTyxTQUFVQyxFQUFPQyxHQUNwQixJQUFJQyxFQUFZRCxFQUFHSixPQUFPLEdBQ3RCTSxFQUFZRixFQUFHSixPQUFPLEdBQzFCckUsRUFBRSxzQ0FBc0NVLElBQUlnRSxHQUM1QzFFLEVBQUUsc0NBQXNDVSxJQUFJaUUsR0FDNUMzRSxFQUFFLGtEQUFrRDRFLFNBQ3BELElBQUlDLEVBQVU3RSxFQUFFLGdEQUNoQjZFLEVBQVFDLEdBQUcsR0FBR0MsT0FBTyxpREFBbURMLEVBQVksZUFDcEZHLEVBQVFDLEdBQUcsR0FBR0MsT0FBTyxrREFBb0RKLEVBQVksa0JBRzdGLElBQUlRLEVBQWlCbkYsRUFBRSxnREFDdkJtRixFQUFlTCxHQUFHLEdBQUdDLE9BQU8saURBQW1ERSx3QkFBMEIsZUFDekdFLEVBQWVMLEdBQUcsR0FBR0MsT0FBTyxrREFBb0RHLHdCQUEwQixlQUUxR2xGLEVBQUUsNkJBQTZCaUUsT0FBTyxDQUNsQ0MsT0FBTyxFQUNQQyxJQUFLLEVBQ0xDLElBQUssR0FDTEMsT0FBUSxDQUFDZSx1QkFBd0JDLHdCQUNqQ2QsTUFBTyxTQUFVQyxFQUFPQyxHQUNwQixJQUFJQyxFQUFZRCxFQUFHSixPQUFPLEdBQ3RCTSxFQUFZRixFQUFHSixPQUFPLEdBQzFCckUsRUFBRSw0Q0FBNENVLElBQUlnRSxHQUNsRDFFLEVBQUUsNENBQTRDVSxJQUFJaUUsR0FDbEQzRSxFQUFFLGlEQUFpRDRFLFNBQ25ELElBQUlDLEVBQVU3RSxFQUFFLCtDQUNoQjZFLEVBQVFDLEdBQUcsR0FBR0MsT0FBTyxpREFBbURMLEVBQVksZ0JBQ3BGRyxFQUFRQyxHQUFHLEdBQUdDLE9BQU8sa0RBQW9ESixFQUFZLG1CQUc3RixJQUFJVyxFQUFnQnRGLEVBQUUsK0NBQ3RCc0YsRUFBY1IsR0FBRyxHQUFHQyxPQUFPLGlEQUFtREssdUJBQXlCLGdCQUN2R0UsRUFBY1IsR0FBRyxHQUFHQyxPQUFPLGtEQUFvRE0sdUJBQXlCLGdCQUc1R3JGLEVBQUUsa0JBQWtCQyxNQUFNLFdBQ3RCLElBQUlzRixFQUFRdkYsRUFBRSxVQUFZQSxFQUFFc0IsTUFBTWtFLEtBQUssVUFBVyxNQUN4QixZQUF0QkQsRUFBTUMsS0FBSyxTQUNYeEYsRUFBRXNCLE1BQU1tRSxLQUFLekYsRUFBRXNCLE1BQU1GLEtBQUssU0FDMUJtRSxFQUFNQyxLQUFLLE9BQVEsVUFFbkJ4RixFQUFFc0IsTUFBTW1FLEtBQUt6RixFQUFFc0IsTUFBTUYsS0FBSyxTQUMxQm1FLEVBQU1DLEtBQUssT0FBUSxlQUkzQixJQUFJRSxFQUFPN0IsT0FBTzhCLFNBQVNELEtBQzNCLEdBQUksTUFBTSxHQUFtRCxLQUFUQSxFQUFhLENBQzdELElBQUlFLEVBQVE1RixFQUFFLHFFQUNELGFBQVQwRixFQUVBRSxFQUFNdkQsT0FFTnVELEVBQU10RCxPQUdWdEMsRUFBRSxnQkFBZ0I2RixZQUFZLFVBQzlCN0YsRUFBRSwwQkFBMEI2RixZQUFZLFVBQ3hDN0YsRUFBRSx3QkFBMEIwRixFQUFPLE1BQU1JLFNBQVNDLFNBQVMsVUFDM0QvRixFQUFFLGdCQUFrQjBGLEdBQU1LLFNBQVMsVUFDbkMvRixFQUFFLHVCQUF1QndGLEtBQUssU0FBVTNCLE9BQU84QixTQUFTSyxNQUN4RGxHLFNBQVNtRyx5QkFHYmpHLEVBQUUsa0JBQWtCQyxNQUFNLFdBQ3RCLElBQUl5RixFQUFPcEUsS0FBSzBFLEtBQUtwRCxNQUFNLEtBQUssR0FDaENpQixPQUFPOEIsU0FBU0QsS0FBT0EsRUFDdkIxRixFQUFFLHVCQUF1QndGLEtBQUssU0FBVTNCLE9BQU84QixTQUFTSyxNQUV4RCxJQUFJSixFQUFRNUYsRUFBRSxxRUFDRCxZQUFUMEYsRUFFQUUsRUFBTXZELE9BRU51RCxFQUFNdEQsU0FJZHRDLEVBQUVnQixVQUFVa0YsUUFBUSxTQUFTaEcsR0FDUixHQUFiQSxFQUFFaUcsU0FDQ25HLEVBQUUsbUJBQW1CaUMsR0FBRyxhQUN2Qi9CLEVBQUVVLGlCQUdPLElBQWJWLEVBQUVpRyxTQUNGckcsU0FBUzhCLGVBTWpCLElBQUl3RSxFQUFZcEcsRUFBRSxjQUNkb0csRUFBVW5FLEdBQUcsWUFDYmpDLEVBQUUscUJBQXFCcUcsV0FBVyxZQUFZUixZQUFZLFlBRTFEN0YsRUFBRSxxQkFBcUJ3RixLQUFLLFdBQVksWUFBWU8sU0FBUyxZQUVqRUssRUFBVW5HLE1BQU0sV0FDUkQsRUFBRXNCLE1BQU1XLEdBQUcsWUFDWGpDLEVBQUUscUJBQXFCcUcsV0FBVyxZQUFZUixZQUFZLFlBRTFEN0YsRUFBRSxxQkFBcUJ3RixLQUFLLFdBQVksWUFBWU8sU0FBUyxjQUlyRS9GLEVBQUUsZ0NBQWdDQyxNQUFNLFNBQVNDLEdBQzdDQSxFQUFFVSxpQkFDRmQsU0FBU2lFLGlCQUdiL0QsRUFBRSwwQ0FBMENzRyxLQUFLLFNBQVUsV0FDdkQsSUFBSTNELEVBQVczQyxFQUFFLG9CQUFvQlUsTUFBTWtDLE1BQU0sTUFBTUMsTUFDdkQ3QyxFQUFFLHVDQUF1QzhDLEtBQUtILE1BSXRENEQsUUFBVSxxQkFFVkMsY0FBZ0IsV0FFWixHQUFHM0MsT0FBTzRDLFFBQVU1QyxPQUFPNEMsT0FBT0MsZ0JBQ2xDLENBQ0ksSUFBSUMsRUFBUyxJQUFJQyxXQUFXLEdBRTVCLE9BREEvQyxPQUFPNEMsT0FBT0MsZ0JBQWdCQyxHQUN2QkEsRUFBTyxHQUViLEdBQUc5QyxPQUFPZ0QsVUFBWWhELE9BQU9nRCxTQUFTSCxnQkFDM0MsQ0FDUUMsRUFBUyxJQUFJQyxXQUFXLEdBRTVCLE9BREEvQyxPQUFPZ0QsU0FBU0gsZ0JBQWdCQyxHQUN6QkEsRUFBTyxHQUlkLE9BQU9HLEtBQUtDLE1BQXNCLElBQWhCRCxLQUFLRSxXQUkvQkMsYUFBZSxTQUFTQyxFQUFPL0csR0FFM0IsSUFBSWdILEVBQWlCQyxNQUFNQyxNQUFNLEtBQU0sQ0FBQ2xILE9BQVVBLElBQzdDbUgsSUFBSSxXQUdELElBREEsSUFBSVgsSUFJQSxHQURBQSxFQUFTWSxPQUFPQyxhQUFhbEcsS0FBS2tGLGlCQUMvQmxGLEtBQUtpRixRQUFRa0IsS0FBS2QsR0FFakIsT0FBT0EsR0FHaEJyRixNQUNGb0csS0FBSyxJQUVWMUcsU0FBUzJHLGtCQUFrQlQsR0FBTyxHQUFHVSxNQUFRVCxHQUdqRFUsVUFBVyxTQUFVWCxFQUFPWSxHQUN4QixJQUFJckgsRUFBS08sU0FBUytHLGNBQWMsWUFDNUJILEVBQVE1RyxTQUFTMkcsa0JBQWtCVCxHQUFPLEdBQUdVLE1BQ2pEbkgsRUFBR21ILE1BQVFBLEVBQ1huSCxFQUFHdUgsYUFBYSxXQUFZLElBQzVCdkgsRUFBR3dILE1BQVEsQ0FBQ0MsU0FBVSxXQUFZQyxLQUFNLFdBQ3hDbkgsU0FBU29ILEtBQUtDLFlBQVk1SCxHQUMxQkEsRUFBRzZILFNBQ0h0SCxTQUFTdUgsWUFBWSxRQUNyQnZILFNBQVNvSCxLQUFLSSxZQUFZL0gsR0FDMUJULEVBQUUsNkJBQStCOEgsRUFBeUIsTUFBTTFGLFlBQ2hFWCxXQUFXLFdBQ1B6QixFQUFFLDZCQUErQjhILEVBQXlCLE1BQU0zRixXQUNqRSxNQUdQc0csU0FBVSxTQUFVQyxFQUFNWixHQUN0QixJQUFJckgsRUFBS08sU0FBUytHLGNBQWMsWUFDaEN0SCxFQUFHbUgsTUFBUWMsRUFDWGpJLEVBQUd1SCxhQUFhLFdBQVksSUFDNUJ2SCxFQUFHd0gsTUFBUSxDQUFDQyxTQUFVLFdBQVlDLEtBQU0sV0FDeENuSCxTQUFTb0gsS0FBS0MsWUFBWTVILEdBQzFCQSxFQUFHNkgsU0FDSHRILFNBQVN1SCxZQUFZLFFBQ3JCdkgsU0FBU29ILEtBQUtJLFlBQVkvSCxHQUMxQlQsRUFBRSw2QkFBK0I4SCxFQUF5QixNQUFNMUYsWUFDaEVYLFdBQVcsV0FDUHpCLEVBQUUsNkJBQStCOEgsRUFBeUIsTUFBTTNGLFdBQ2pFLE1BR1B3RyxjQUFlLFNBQVVDLEdBQ3JCLElBQUlDLEVBQUk3SCxTQUFTOEgsZUFBZUYsR0FDUixTQUFwQkMsRUFBRVosTUFBTWMsUUFDUkYsRUFBRVosTUFBTWMsUUFBVSxRQUVsQkYsRUFBRVosTUFBTWMsUUFBVSxRQVkxQnBJLFVBQVcsU0FBVU8sRUFBVThILEVBQVNDLFFBQ2IsSUFBWkQsSUFDUEEsRUFBVSxTQUdRLElBQVhDLElBQ1BBLEVBQVMsY0FHYixJQUFJQyxFQUFNbEosRUFBRSxJQUFNa0IsR0FDTGxCLEVBQUU2RCxRQUFRc0YsWUF1QnZCLE9BcEJBRCxFQUFJM0gsS0FBSyxpQkFBaUJ3RSxTQUFTLDJCQUNuQ21ELEVBQUlFLE1BQU1KLEdBQ1ZFLEVBQUlqSSxHQUFHLGlCQUFrQixXQUNyQmpCLEVBQUUsUUFBUXFKLElBQUksV0FBWSxRQU8xQnJKLEVBQUUsY0FBY3NKLFFBQVEsQ0FBRUgsVUFBVyxHQUFLLFFBRTFDRixNQUdKQyxFQUFJakksR0FBRyxnQkFBaUIsY0FLakJpSSxHQVVYdEgsV0FBWSxTQUFVVixFQUFVcUksR0FDNUIsSUFBSUwsRUFBTWxKLEVBQUUsbUJBbUJaLFlBakJ3QixJQUFia0IsR0FBNkJBLElBQ3BDZ0ksRUFBTWxKLEVBQUUsSUFBTWtCLFNBR0ssSUFBWnFJLElBQ1BBLEVBQVUsY0FHZEwsRUFBSUUsTUFBTSxRQUNWRixFQUFJakksR0FBRyxnQkFBaUIsY0FJeEJRLFdBQVcsV0FDUDhILEtBQ0QsS0FFSUwsR0FXWHpHLGdCQUFpQixTQUFVRCxHQUN2QixJQUFJZ0gsRUFBcUIsR0FDekJ4SixFQUFFLDZDQUE2Q3lKLEtBQUssV0FDaERELEdBQXNCbEksS0FBS3NHLE1BQVEsTUFDcEM4QixVQUFVQyxLQUFLLFdBQ2QzSixFQUFFdUQsS0FBS0Msa0JBQW1CLENBQ3RCQyxPQUFVLE9BQ1ZyQyxLQUFRLENBQ0pvQixNQUFRQSxFQUNSaUIsT0FBUSxtQkFDUitGLG1CQUFvQkEsR0FFeEI3RixTQUFZLFNBQ2JDLFFBQVEsU0FBU3hDLEdBQ2hCcEIsRUFBRSxzQkFBc0I4QyxLQUFLMUIsUUFLekNzQixxQkFBc0IsU0FBVUYsR0FDNUJ4QyxFQUFFdUQsS0FBS0Msa0JBQW1CLENBQ3RCQyxPQUFVLE9BQ1ZyQyxLQUFRLENBQ0pvQixNQUFRQSxFQUNSaUIsT0FBUSwwQkFFWkUsU0FBWSxTQUNiQyxRQUFRLFNBQVN4QyxHQUNoQnBCLEVBQUUsNEJBQTRCOEMsS0FBSzFCLEdBRW5DdEIsU0FBU3FELDBCQUEwQixTQUFVSCxHQUN6Q2xELFNBQVNzRCwrQkFBK0JKLFFBU3BERywwQkFBMkIsU0FBU3lHLEdBRWhDLElBQUk1RyxFQUFrQmhELEVBQUUsWUFBWVUsTUFHcENaLFNBQVNpRCx1QkFBdUIsU0FBVU0sR0FDdEMsSUFBSXNELEVBQVMzRCxFQUFnQjZHLE9BQU94RyxHQUNwQ3VHLEVBQVNqRCxNQVFqQjVELHVCQUF3QixTQUFVNkcsR0FDOUIsSUFBSTVHLEVBQWtCLEdBRXRCaEQsRUFBRSxpRUFBaUV5SixLQUFLLFdBQ3BFLElBQUloRyxFQUFTekQsRUFBRXNCLE1BQU1aLE1BQ3JCc0MsRUFBZ0I4RyxLQUFLckcsS0FDdEJpRyxVQUFVQyxLQUFLLFdBQ2RDLEVBQVM1RyxNQVFqQkksK0JBQWdDLFNBQVNKLEdBRXJDLElBQUkrRyxFQUFXL0osRUFBRSxpREFDYmdLLEVBQVNoSyxFQUFFLCtDQUNYaUssRUFBTWpLLEVBQUUseURBRVJnRCxFQUFnQkMsU0FBUyxhQUN6QjhHLEVBQVNoSixLQUFLLFlBQVksR0FBTzhFLFlBQVksWUFDN0NtRSxFQUFPakosS0FBSyxZQUFZLEdBQU1nRixTQUFTLGFBQ2hDL0MsRUFBZ0JDLFNBQVMsV0FDaEMrRyxFQUFPakosS0FBSyxZQUFZLEdBQU84RSxZQUFZLFlBQzNDa0UsRUFBU2hKLEtBQUssWUFBWSxHQUFNZ0YsU0FBUyxhQUV6Q2tFLEVBQUlsSixLQUFLLFlBQVksR0FBTzhFLFlBQVksYUFJaER2QyxvQkFBcUIsU0FBVTRHLEdBQzNCbEssRUFBRSwwQkFBNEJrSyxFQUFpQixNQUFNdEYsU0FDckQ1RSxFQUFFLE1BQVFrSyxHQUFnQkMsUUFBUSxJQUFNLFdBQ3BDbkssRUFBRXNCLE1BQU1zRCxZQUloQjFCLGlCQUFrQixXQUVkcEQsU0FBU3FELDBCQUEwQixTQUFVSCxHQUN6Q2hELEVBQUV1RCxLQUFLQyxrQkFBbUIsQ0FDdEJDLE9BQVUsT0FDVnJDLEtBQVEsQ0FDSjRCLGdCQUFpQkEsRUFDakJTLE9BQVEseUJBRVpFLFNBQVksU0FDYkMsUUFBUSxTQUFTeEMsR0FDaEJwQixFQUFFLDZCQUE2QjhDLEtBQUsxQixHQUNwQ3RCLFNBQVM4QixXQUFXLDZCQUtoQ1Asc0JBQXVCLFdBRW5CLElBQUkyQixFQUFrQmhELEVBQUUsWUFBWVUsTUFFcENWLEVBQUV1RCxLQUFLQyxrQkFBbUIsQ0FDdEJwQyxLQUFRLENBQ0pxQyxPQUFRLHVCQUNSSixTQUFVTCxHQUVkVyxTQUFZLFNBQ2JDLFFBQVEsU0FBU3hDLEdBQ2hCcEIsRUFBRSx1Q0FBdUM4QyxLQUFLMUIsR0FFOUN0QixTQUFTcUQsMEJBQTBCLFNBQVVILEdBQ3pDbEQsU0FBU3NELCtCQUErQkosUUFNcERyQixzQkFBdUIsU0FBU3lJLEVBQVNDLEdBQ3JDLE1BQXVCLFNBQXBCRCxFQUFRRSxVQUdQRixFQUFRRyxVQUFVM0gsTUFBTSxLQUFLNEgsUUFBUUgsSUFBYyxHQUloREQsRUFBUUssWUFBY25KLEtBQUtLLHNCQUFzQnlJLEVBQVFLLFdBQVlKLEtBR2hGSyxnQkFBaUIsV0FDYjFLLEVBQUUseUJBQXlCcUMsT0FDM0JyQyxFQUFFLGtCQUFrQnNDLE9BQ3BCdEMsRUFBRSx1QkFBdUJxQyxPQUN6QnJDLEVBQUUsdUJBQXVCcUMsT0FDekJyQyxFQUFFLHdDQUF3QytGLFNBQVMsV0FHbkQvRixFQUFFLDZDQUE2QytGLFNBQVMsVUFHeEQvRixFQUFFLGlCQUFpQnNDLE9BQ25CdEMsRUFBRSw0QkFBNEJxQyxPQUM5QnJDLEVBQUUsaUNBQWlDc0MsT0FDbkN0QyxFQUFFLHNDQUFzQ3NDLFFBRzVDcUksY0FBZSxXQUNYM0ssRUFBRSx5QkFBeUJxQyxPQUMzQnJDLEVBQUUsd0JBQXdCc0MsT0FDMUJ0QyxFQUFFLHdDQUF3QytGLFNBQVMsV0FDbkQvRixFQUFFLHNCQUFzQnNDLE9BQ3hCdEMsRUFBRSxrQkFBa0JxQyxPQUNwQnJDLEVBQUUsNkNBQTZDK0YsU0FBUyxVQUd4RC9GLEVBQUUsaUJBQWlCc0MsT0FDbkJ0QyxFQUFFLDRCQUE0QnFDLE9BQzlCckMsRUFBRSxpQ0FBaUNzQyxPQUNuQ3RDLEVBQUUsc0NBQXNDc0MsT0FFeEN0QyxFQUFFLGtCQUFrQnFDLFFBR3hCNEQsdUJBQXdCLFdBQ3BCakcsRUFBRSx5QkFBeUJxQyxPQUMzQnJDLEVBQUUsa0JBQWtCcUosSUFBSSxVQUFXLFFBQ25DckosRUFBRSxpQ0FBaUNzQyxPQUNuQ3RDLEVBQUUsd0NBQXdDNkYsWUFBWSxXQUN0RDdGLEVBQUUsc0JBQXNCcUMsT0FDeEJyQyxFQUFFLDBCQUEwQnFDLE9BQzVCckMsRUFBRSxnREFBZ0Q2RixZQUFZLFFBQzlEN0YsRUFBRSxpQkFBaUJzQyxPQUduQnRDLEVBQUUsNEJBQTRCc0MsT0FDOUJ0QyxFQUFFLGlDQUFpQ3FDLFFBR3ZDdUksbUJBQW9CLFNBQVUxSyxHQUN0QkEsR0FDQUEsRUFBRVUsaUJBR05aLEVBQUUsc0JBQXNCc0MsT0FDeEJ0QyxFQUFFLHlCQUF5QnNDLE9BQzNCdEMsRUFBRSx3QkFBd0JxQyxPQUMxQnJDLEVBQUUsNkNBQTZDNkYsWUFBWSxVQUczRDdGLEVBQUUsaUJBQWlCc0MsT0FDbkJ0QyxFQUFFLDRCQUE0QnFDLE9BQzlCckMsRUFBRSxpQ0FBaUNzQyxRQUd2Q3VJLGdCQUFpQixTQUFVM0ssR0FDdkIsS0FBSUYsRUFBRSwwQ0FBMENVLE1BQU1QLE9BQVMsR0FDM0RtQixLQUFLd0osY0FBYzlLLEVBQUUsMkNBQTJDVSxRQUNoRVYsRUFBRSxpQ0FBaUNpQyxHQUFHLGFBZXRDLE9BQU8sRUFkUC9CLEVBQUVVLGlCQUNGWixFQUFFdUQsS0FBS0Msa0JBQW1CLENBQ3RCcEMsS0FBUSxDQUNKcUMsT0FBUSxtQkFDUnNILGFBQWMvSyxFQUFFLHNCQUFzQmdMLGFBRTFDckgsU0FBWSxTQUNiQyxRQUFRLFNBQVN4QyxHQUNoQnBCLEVBQUUsc0JBQXNCcUMsT0FDeEJyQyxFQUFFLDBCQUEwQnFKLElBQUksVUFBVyxnQkFDM0NySixFQUFFLDZDQUE2QzZGLFlBQVksVUFDM0Q3RixFQUFFLGdEQUFnRCtGLFNBQVMsV0FPdkUrRSxjQUFlLFNBQVVHLEdBR3JCLFFBQU9qTCxFQUFFa0wsS0FBS0QsR0FBT0UsTUFGUCx5R0FLbEJwSCxhQUFjLFdBQ1YsSUFBSXFILEVBQVksR0FDWkMsRUFBd0IsR0FDNUJyTCxFQUFFLG1DQUFtQ3lKLEtBQUssV0FDdEMsR0FBSW5JLEtBQUtnSyxRQUFTLENBQ2QsTUFBTUMsRUFBZXZMLEVBQUVzQixNQUFNWixNQUN6QjhLLEVBQVF4TCxFQUFFc0IsTUFBTW1LLFFBQVEsb0JBQW9CaEcsT0FHNUMsQ0FBQyxLQUFNLEtBQU0sS0FBTSxLQUFLLEtBQU0sTUFBTStFLFFBQVFlLElBQWlCLEdBQzdERixFQUFzQnZCLEtBQUswQixHQUcvQkosRUFBVXRCLEtBQUt5QixNQUdwQjdCLFVBQVVDLEtBQU0sV0FDZixJQUFLeUIsRUFBVVosUUFBUSxPQUFTLEdBQUtZLEVBQVVaLFFBQVEsT0FBUyxTQUEyQyxJQUE5QjNHLE9BQU9DLG1CQUFvQyxDQUNwSCxJQUFJMEgsRUFBUXhMLEVBQUUsMEJBQTBCOEMsT0FDeEM5QyxFQUFFLDBCQUEwQjhDLEtBQUswSSxFQUFNRSxRQUFRLFlBQWFMLEVBQXNCM0QsS0FBSyxRQUV2RjVILFNBQVM4QixZQUFXLEVBQU8sV0FDdkI5QixTQUFTYSxVQUFVLDJDQUl2QmIsU0FBUzZMLG9CQUFvQlAsRUFBV3ZILE9BQU9DLHVCQUszRDZILG9CQUFxQixTQUFVUCxFQUFXUSxHQUN0QyxPQUFPNUwsRUFBRXVELEtBQUtDLGtCQUFtQixDQUM3QkMsT0FBVSxPQUNWckMsS0FBUSxDQUNKZ0ssVUFBV0EsRUFDWDNILE9BQVEsNkJBQ1JvSSxZQUFhRCxHQUVqQmpJLFNBQVksU0FDYkMsUUFBUSxTQUFTeEMsR0FDaEJwQixFQUFFLDZCQUE2QjhDLEtBQUsxQixHQUNwQ3RCLFNBQVM4QixXQUFXLHFCQVE1QmtLLGdCQUFpQixTQUFTQyxHQUN0QixJQUFJdEwsRUFBS1QsRUFBRSxtQkFDWFMsRUFBR3NFLE9BQU9nSCxFQUFVLFFBQ3BCdEwsRUFBRzBJLFVBQVUxSSxFQUFHLEdBQUd1TCxhQUFldkwsRUFBR3dMLFdBU3pDQyxrQkFBbUIsU0FBU0MsRUFBUXZDLEdBQ2hDLE9BQU81SixFQUFFdUQsS0FBS00sT0FBT3VJLG1CQUFvQixDQUNyQ2hMLEtBQU0sQ0FDRitLLE9BQVFBLEdBRVp4SSxTQUFVLFNBQ1hnRyxLQUFLLFNBQVN2SSxHQUNiQSxFQUFLQSxLQUFLZixRQUFRLFNBQVNDLEVBQU1DLEVBQU9DLEdBQ3BDVixTQUFTZ00sZ0JBQWdCeEwsS0FHeEJjLEVBQUt3QyxRQUdOZ0csRUFBUyxLQUFNeEksR0FGZndJLEVBQVN4SSxFQUFLQSxLQUFNQSxLQUt6QmlMLEtBQUssU0FBVUMsRUFBT0MsRUFBWUMsR0FDakMxTSxTQUFTZ00sZ0JBQWdCVyxLQUFLQyxVQUFVRixJQUN4QzVDLEVBQVM0QyxFQUFhLE9BTzlCRyxVQUFXLFdBQ1BDLE1BQU1DLE9BQU8sQ0FDVEMsTUFBTyxTQUFTbEQsR0FDWjlKLFNBQVNvTSxrQkFBa0IsUUFBU3RDLElBRXhDbUQsTUFBTyxTQUFTbkQsR0FDWjlKLFNBQVNvTSxrQkFBa0IsUUFBU3RDLElBRXhDb0QsTUFBTyxTQUFTcEQsR0FDWjlKLFNBQVNvTSxrQkFBa0IsUUFBU3RDLElBRXhDcUQsTUFBTyxTQUFTckQsR0FDWjlKLFNBQVNvTSxrQkFBa0IsUUFBU3RDLElBRXhDc0QsTUFBTyxTQUFVdEQsR0FDYjlKLFNBQVNnTSxnQkFBZ0IscUJBQ3pCaE0sU0FBU29NLGtCQUFrQixlQUFnQixTQUFVaUIsRUFBSy9MLEdBQ3RELElBQUlnTSxFQUFVaE0sRUFBS2dNLFFBQ2ZDLEVBQWdCRCxFQUFRak4sT0FDeEJtTixFQUFtQixFQUd2QlYsTUFBTVcsV0FBV0gsRUFBUyxTQUFTSSxFQUFVQyxHQUN6QzNOLFNBQVNnTSxnQkFBZ0IsaUJBQW1CMEIsR0FHNUN4TixFQUFFdUQsS0FBS00sT0FBT3VJLG1CQUFvQixDQUM5QmhMLEtBQU0sQ0FDRitLLE9BQVEsZUFDUnFCLFNBQVVBLEdBRWQ3SixTQUFVLFNBQ1hnRyxLQUFLLFNBQVMrRCxHQUNiNU4sU0FBU2dNLGdCQUFnQixVQUFZMEIsRUFBVyxtQkFDakRHLE9BQU8sV0FDTkwsSUFDQU0sUUFBUUMsSUFBSVAsR0FDWk0sUUFBUUMsSUFBSVIsR0FFWixNQUFNUyxFQUFTaEgsS0FBS0MsTUFBTXVHLEVBQW1CRCxFQUFnQixLQUM3RHJOLEVBQUUscUJBQXFCcUosSUFBSSxRQUFTeUUsRUFBUyxLQUFLdEksS0FBSyxnQkFBaUJzSSxHQUV4RUwsT0FFTCxTQUFTTixHQUNKQSxHQUNBUyxRQUFRQyxJQUFJVixHQUdoQnZELFNBSVptRSxNQUFPLFNBQVVuRSxHQUNiOUosU0FBU29NLGtCQUFrQixTQUFVdEMsS0FFMUMsU0FBU3VELEVBQUthLEdBRWJKLFFBQVFDLElBQUlHLEdBQ1psTyxTQUFTZ00sZ0JBQWdCLGdCQUtyQzlMLEVBQUUsV0FDRUYsU0FBU0MiLCJmaWxlIjoiYmFja29mZmljZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIDIwMDctMjAyMSBJbmdlbmljb1xuICpcbiAqIE5PVElDRSBPRiBMSUNFTlNFXG4gKlxuICogVGhpcyBzb3VyY2UgZmlsZSBpcyBzdWJqZWN0IHRvIHRoZSBBY2FkZW1pYyBGcmVlIExpY2Vuc2UgKEFGTCAzLjApXG4gKiB0aGF0IGlzIGJ1bmRsZWQgd2l0aCB0aGlzIHBhY2thZ2UgaW4gdGhlIGZpbGUgTElDRU5TRS50eHQuXG4gKiBJdCBpcyBhbHNvIGF2YWlsYWJsZSB0aHJvdWdoIHRoZSB3b3JsZC13aWRlLXdlYiBhdCB0aGlzIFVSTDpcbiAqIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9hZmwtMy4wLnBocFxuICogSWYgeW91IGRpZCBub3QgcmVjZWl2ZSBhIGNvcHkgb2YgdGhlIGxpY2Vuc2UgYW5kIGFyZSB1bmFibGUgdG9cbiAqIG9idGFpbiBpdCB0aHJvdWdoIHRoZSB3b3JsZC13aWRlLXdlYiwgcGxlYXNlIHNlbmQgYW4gZW1haWxcbiAqIHRvIGNvbnRhY3RAaW5nZW5pY28uY29tIHdlIGNhbiBzZW5kIHlvdSBhIGNvcHkgaW1tZWRpYXRlbHkuXG4gKlxuICogIEBhdXRob3IgICAgSW5nZW5pY28gPGNvbnRhY3RAaW5nZW5pY28uY29tPlxuICogIEBjb3B5cmlnaHQgMjAwNy0yMDIxIEluZ2VuaWNvXG4gKiAgQGxpY2Vuc2UgICBodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvYWZsLTMuMC5waHAgIEFjYWRlbWljIEZyZWUgTGljZW5zZSAoQUZMIDMuMClcbiAqL1xuXCJ1c2Ugc3RyaWN0XCJcblxuY29uc3QgSW5nZW5pY28gPSB7XG5cbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgJCgnLmluZ2VuaWNvLWhlYWRlciAuc3dpdGNoLnRlc3QtbGl2ZS10b2dnbGUnKS5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoJCgnLmluZ2VuaWNvLWhlYWRlciAuc3dpdGNoLnRlc3QtbGl2ZS10b2dnbGUgaW5wdXQ6Y2hlY2tlZCcpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBsaXZlIGNvbmZpZ3VyZWQuXG4gICAgICAgICAgICAgICAgY29uc3QgcmVxdWlyZWRGaWVsZHMgPSBbXG4gICAgICAgICAgICAgICAgICAgICdjb25uZWN0aW9uX2xpdmVfcHNwaWQnLFxuICAgICAgICAgICAgICAgICAgICAnY29ubmVjdGlvbl9saXZlX3NpZ25hdHVyZScsXG4gICAgICAgICAgICAgICAgICAgICdjb25uZWN0aW9uX2xpdmVfZGxfdXNlcicsXG4gICAgICAgICAgICAgICAgICAgICdjb25uZWN0aW9uX2xpdmVfZGxfcGFzc3dvcmQnLFxuICAgICAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgICAgICB2YXIgaXNWYWxpZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmVxdWlyZWRGaWVsZHMuZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpbmRleCwgYXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBlbCA9ICQoJ1tuYW1lPVwiJyArIGl0ZW0gKyAnXCJdJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbC5sZW5ndGggPT09IDAgfHwgZWwudmFsKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZCkge1xuICAgICAgICAgICAgICAgICAgICBJbmdlbmljby5vcGVuTW9kYWwoJ2NyZWRlbnRpYWxzLWxpdmUtdmFsaWRhdGlvbi1tb2RhbCcpO1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBTZXQgTGl2ZSBpcyBcIk9uXCJcbiAgICAgICAgICAgICAgICAgICAgJCgnW25hbWU9Y29ubmVjdGlvbl9tb2RlXScpLnZhbCgnb24nKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmluZ2VuaWNvLWhlYWRlciwgLmluZ2VuaWNvLXNldHRpbmdzJykudG9nZ2xlQ2xhc3MoJ3Rlc3QnKS50b2dnbGVDbGFzcygnbGl2ZScpO1xuXG4gICAgICAgICAgICAgICAgICAgICQoJ1tuYW1lPVwiY29ubmVjdGlvbl90ZXN0X3BzcGlkXCJdLFtuYW1lPVwiY29ubmVjdGlvbl90ZXN0X3NpZ25hdHVyZVwiXSxbbmFtZT1cImNvbm5lY3Rpb25fdGVzdF9kbF91c2VyXCJdLFtuYW1lPVwiY29ubmVjdGlvbl90ZXN0X2RsX3Bhc3N3b3JkXCJdJykucmVtb3ZlUHJvcCgncmVxdWlyZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnW25hbWU9XCJjb25uZWN0aW9uX2xpdmVfcHNwaWRcIl0sW25hbWU9XCJjb25uZWN0aW9uX2xpdmVfc2lnbmF0dXJlXCJdLFtuYW1lPVwiY29ubmVjdGlvbl9saXZlX2RsX3VzZXJcIl0sW25hbWU9XCJjb25uZWN0aW9uX2xpdmVfZGxfcGFzc3dvcmRcIl0nKS5wcm9wKCdyZXF1aXJlZCcsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gU2V0IExpdmUgaXMgXCJPZmZcIlxuICAgICAgICAgICAgICAgICQoJ1tuYW1lPWNvbm5lY3Rpb25fbW9kZV0nKS52YWwoJ29mZicpO1xuICAgICAgICAgICAgICAgICQoJ1tuYW1lPVwiY29ubmVjdGlvbl9saXZlX3BzcGlkXCJdLFtuYW1lPVwiY29ubmVjdGlvbl9saXZlX3NpZ25hdHVyZVwiXSxbbmFtZT1cImNvbm5lY3Rpb25fbGl2ZV9kbF91c2VyXCJdLFtuYW1lPVwiY29ubmVjdGlvbl9saXZlX2RsX3Bhc3N3b3JkXCJdJykucmVtb3ZlUHJvcCgncmVxdWlyZWQnKTtcbiAgICAgICAgICAgICAgICAkKCdbbmFtZT1cImNvbm5lY3Rpb25fdGVzdF9wc3BpZFwiXSxbbmFtZT1cImNvbm5lY3Rpb25fdGVzdF9zaWduYXR1cmVcIl0sW25hbWU9XCJjb25uZWN0aW9uX3Rlc3RfZGxfdXNlclwiXSxbbmFtZT1cImNvbm5lY3Rpb25fdGVzdF9kbF9wYXNzd29yZFwiXScpLnByb3AoJ3JlcXVpcmVkJywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuaW5nZW5pY28tc2V0dGluZ3MgLm1vZGFsLWxpbmsnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgY29uc3QgbW9kYWxfaWQgPSAkKGUudGFyZ2V0KS5kYXRhKCdtb2RhbC1pZCcpO1xuICAgICAgICAgICAgaWYgKG1vZGFsX2lkID09PSAncGF5bWVudC1tZXRob2RzLWxpc3QnKSB7XG4gICAgICAgICAgICAgICAgSW5nZW5pY28uZ2V0UGF5bWVudE1ldGhvZE1vZGFsKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIEluZ2VuaWNvLm9wZW5Nb2RhbChtb2RhbF9pZCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCAnY2xpY2snLCAnLmFjY291bnQtaGVhZGVyJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGxldCBlbCA9ICQodGhpcyk7XG4gICAgICAgICAgICBpZiAoIGVsLnByb3AoJ2Rpc2FibGVkJykgKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZWwucHJvcCggJ2Rpc2FibGVkJywgdHJ1ZSApO1xuICAgICAgICAgICAgZWwuZmluZCggJy5jb2xsYXBzZS1idG4nICkuZmlyc3QoKS5jbGljaygpO1xuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBlbC5wcm9wKCAnZGlzYWJsZWQnLCBmYWxzZSApO1xuICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgfSApO1xuXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCAnY2xpY2snLCAnLmFjY291bnQtaGVhZGVyJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIC8vIFRvZ2dsZSBTaG93IGFuZCBIaWRlIGxhYmVsc1xuICAgICAgICAgICAgJCh0aGlzKS5maW5kKCAnc3BhbicgKS50b2dnbGUoKTtcbiAgICAgICAgfSApO1xuXG4gICAgICAgICQoJy5tb2RhbC1kaWFsb2cgLmNsb3NlLCAubW9kYWwtYmFja2Ryb3AsIC5pbmdlbmljby1tb2RhbCcpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmIChJbmdlbmljby5oYXNTb21lUGFyZW50VGhlQ2xhc3MoZS50YXJnZXQsICdtb2RhbC1kaWFsb2cnKSkge1xuICAgICAgICAgICAgICAgIGlmKCFJbmdlbmljby5oYXNTb21lUGFyZW50VGhlQ2xhc3MoZS50YXJnZXQsICdjbG9zZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIEluZ2VuaWNvLmNsb3NlTW9kYWwoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnLnN3aXRjaCA+IGlucHV0JykuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdkaXNhYmxlZCcpKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnLnN3aXRjaCA+IGlucHV0JykuY2hhbmdlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGxldCB0b2dnbGVfdGFyZ2V0ID0gJCh0aGlzKS5kYXRhKCd0b2dnbGUtbmFtZScpO1xuICAgICAgICAgICAgbGV0IHJldmVyc2UgPSAkKHRoaXMpLmRhdGEoJ3RvZ2dsZS1yZXZlcnNlJyk7XG4gICAgICAgICAgICBsZXQgY2hlY2tlZCA9ICQodGhpcykuaXMoJzpjaGVja2VkJyk7XG4gICAgICAgICAgICBpZiAoY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgIGlmIChwYXJzZUludChyZXZlcnNlKSA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAkKCcuJyArIHRvZ2dsZV90YXJnZXQpLnNsaWRlVXAoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkKCcuJyArIHRvZ2dsZV90YXJnZXQpLnNsaWRlRG93bigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KHJldmVyc2UpID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy4nICsgdG9nZ2xlX3RhcmdldCkuc2xpZGVEb3duKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLicgKyB0b2dnbGVfdGFyZ2V0KS5zbGlkZVVwKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAkKCcucmFkaW8gPiBpbnB1dCcpLmNoYW5nZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsZXQgdmFsID0gJCh0aGlzKS52YWwoKTtcbiAgICAgICAgICAgIGxldCB0b2dnbGVfdGFyZ2V0ID0gJCh0aGlzKS5kYXRhKCd0b2dnbGUtbmFtZScpO1xuICAgICAgICAgICAgJCgnLicgKyB0b2dnbGVfdGFyZ2V0KS5zbGlkZVVwKCk7XG4gICAgICAgICAgICAkKCcuJyArIHRvZ2dsZV90YXJnZXQgKyB2YWwpLnNsaWRlRG93bigpO1xuICAgICAgICAgICAgLy9JRS04OVxuICAgICAgICAgICAgLy8gSW5saW5lIG1ldGhvZCBhbHdheXMgaGF2ZSBcIkluZ2VuaWNvXCIgdGVtcGxhdGVcbiAgICAgICAgICAgIGlmKHRvZ2dsZV90YXJnZXQgKyB2YWwgPT09ICdwYXltZW50cGFnZV90eXBlSU5MSU5FJykge1xuICAgICAgICAgICAgICAgICQoJyN0ZW1wbGF0ZV9tYW5hZ2VyJykuY2xpY2soKTtcbiAgICAgICAgICAgICAgICAkKCdbbmFtZT1wYXltZW50cGFnZV90ZW1wbGF0ZV9uYW1lXScpLmhpZGUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnW25hbWU9cGF5bWVudHBhZ2VfdGVtcGxhdGVfbmFtZV0nKS5zaG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJ1tuYW1lPXBheW1lbnRwYWdlX3R5cGVdJykuY2hhbmdlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLnZhbCgpID09PSAnUkVESVJFQ1QnKSB7XG4gICAgICAgICAgICAgICAgJCgnLnN0ZXAxLmlubGluZScpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKCcuc3RlcDEucmVkaXJlY3QnKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgJCgnLnBwdC5pbmxpbmUnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgJCgnLnBwdC5yZWRpcmVjdCcpLnNob3coKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoJCh0aGlzKS52YWwoKSA9PT0gJ0lOTElORScpIHtcbiAgICAgICAgICAgICAgICAkKCcuc3RlcDEucmVkaXJlY3QnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgJCgnLnN0ZXAxLmlubGluZScpLnNob3coKTtcbiAgICAgICAgICAgICAgICAkKCcucHB0LnJlZGlyZWN0JykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQoJy5wcHQuaW5saW5lJykuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAkKCcudG9nZ2xlLWZpZWxkJykuY2xpY2soZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgSW5nZW5pY28uY2xvc2VNb2RhbCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkKCcuY291bnRyeS1saXN0Jykua2V5dXAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgcXVlcnkgPSAkKHRoaXMpLnZhbCgpO1xuICAgICAgICAgICAgSW5nZW5pY28uZmlsdGVyQ291bnRyaWVzKHF1ZXJ5KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnLnBheW1lbnQtbWV0aG9kcy1saXN0Jykua2V5dXAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgcXVlcnkgPSAkKHRoaXMpLnZhbCgpO1xuICAgICAgICAgICAgSW5nZW5pY28uZmlsdGVyUGF5bWVudE1ldGhvZHMocXVlcnkpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTdXBwb3J0OiBFeHBvcnQgU2V0dGluZ3MgQnV0dG9uXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjZXhwb3J0LXNldHRpbmdzJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICQoJyNzdWJtaXRFeHBvcnRTZXR0aW5ncycpLmNsaWNrKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2UnLCAnaW5wdXRbdHlwZT1maWxlXSNzdXBwb3J0LWltcG9ydCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBjb25zdCBmaWxlbmFtZSA9ICQoJ2lucHV0W3R5cGU9ZmlsZV0jc3VwcG9ydC1pbXBvcnQnKS52YWwoKS5zcGxpdCgnXFxcXCcpLnBvcCgpO1xuICAgICAgICAgICAgJCgnI3N1cHBvcnQgLnVwbG9hZC1sYWJlbCcpLmh0bWwoZmlsZW5hbWUpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTdXBwb3J0OiBTaG93IFVwbG9hZCBDb25maXJtYXRpb24gTW9kYWxcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNtb2RhbEltcG9ydFNldHRpbmdzJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIEluZ2VuaWNvLm9wZW5Nb2RhbCgndXBsb2FkLWNvbmZpcm1hdGlvbi1tb2RhbCcpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTdXBwb3J0OiBJbXBvcnQgU2V0dGluZ3MgQnV0dG9uXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjc3VibWl0TW9kYWxJbXBvcnRTZXR0aW5ncycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAkKCcjc3VibWl0SW1wb3J0U2V0dGluZ3MnKS5jbGljaygpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBCdXR0b246IEFkZCBtb3JlIHBheW1lbnQgbWV0aG9kcyAvIEFwcGx5XG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCAnY2xpY2snLCAnW25hbWU9c3VibWl0X3NhdmVfcGF5bWVudHNdJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgSW5nZW5pY28uZ2V0TW9kYWxQYXltZW50TWV0aG9kcyhmdW5jdGlvbiAocGF5bWVudF9tZXRob2RzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBheW1lbnRfbWV0aG9kcy5pbmNsdWRlcygnYWZ0ZXJwYXknKSB8fCBwYXltZW50X21ldGhvZHMuaW5jbHVkZXMoJ2tsYXJuYScpICkge1xuICAgICAgICAgICAgICAgICAgICAvLyBTaG93IFwiQ2hvb3NlIENvdW50cnlcIiBtb2RhbFxuICAgICAgICAgICAgICAgICAgICBJbmdlbmljby5vcGVuTW9kYWwoJ29wZW5pbnZvaWNlLWNob29zZS1jb3VudHJ5LW1vZGFsJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gU2F2ZSBwYXltZW50IG1ldGhvZHNcbiAgICAgICAgICAgICAgICBJbmdlbmljby5hZGRQYXltZW50TWV0aG9kKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gUGF5bWVudCBtZXRob2RzIGxpc3Q6IE9ubHkgb25lIG9mIHRoZSB0d28gT3BlbiBJbnZvaWNlIFBNcyBjYW4gYmUgc2VsZWN0ZWRcbiAgICAgICAgJChkb2N1bWVudCkub24oICdjbGljaycsICcjcGF5bWVudC1tZXRob2RzLWxpc3QgaW5wdXRbbmFtZT1cInBheW1lbnRfbWV0aG9kc1tdXCJdJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIEluZ2VuaWNvLmdldFNlbGVjdGVkUGF5bWVudE1ldGhvZHMoZnVuY3Rpb24gKHBheW1lbnRfbWV0aG9kcykge1xuICAgICAgICAgICAgICAgIEluZ2VuaWNvLmRpc2FibGVBZnRlcnBheU9yS2xhcm5hTWV0aG9kcyhwYXltZW50X21ldGhvZHMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIE9wZW5JbnZvaWNlOiBDaG9vc2UgQ291bnRyeVxuICAgICAgICAkKGRvY3VtZW50KS5vbiggJ2NsaWNrJywgJyNvcGVuaW52b2ljZS1jaG9vc2UtY291bnRyeS1tb2RhbCAuYXBwbHknLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsZXQgc2VsZWN0ZWQgPSAkKCdbbmFtZT1vcGVuaW52b2ljZV9jb3VudHJ5XTpjaGVja2VkJykudmFsKCk7XG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWQgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgLy8gVW5zZXQgYWxsIE9wZW5JbnZvaWNlIG1ldGhvZHNcbiAgICAgICAgICAgICAgICBJbmdlbmljby5yZW1vdmVQYXltZW50TWV0aG9kKCdhZnRlcnBheScpO1xuICAgICAgICAgICAgICAgIEluZ2VuaWNvLnJlbW92ZVBheW1lbnRNZXRob2QoJ2tsYXJuYScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkKCdbbmFtZT1nZW5lcmljX2NvdW50cnldJykudmFsKHNlbGVjdGVkKTtcblxuICAgICAgICAgICAgJC5hamF4KCBpbmdlbmljb19hamF4X3VybCwge1xuICAgICAgICAgICAgICAgICdtZXRob2QnOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgJ2RhdGEnOiB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ3NldF9tZXJjaGFudF9jb3VudHJ5JyxcbiAgICAgICAgICAgICAgICAgICAgY291bnRyeTogc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICdkYXRhVHlwZSc6ICdqc29uJ1xuICAgICAgICAgICAgfSApLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIEluZ2VuaWNvLmNsb3NlTW9kYWwoJ29wZW5pbnZvaWNlLWNob29zZS1jb3VudHJ5LW1vZGFsJyk7XG4gICAgICAgICAgICB9ICk7XG4gICAgICAgIH0gKTtcblxuICAgICAgICAvLyBPcGVuSW52b2ljZTogU2VsZWN0IG1ldGhvZFxuICAgICAgICAkKGRvY3VtZW50KS5vbiggJ2NsaWNrJywgJyNvcGVuaW52b2ljZS1zZWxlY3QtcGF5bWVudC1tb2RhbCAuYXBwbHknLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB3aW5kb3cuT1BFTklOVk9JQ0VfTUVUSE9EID0gJCgnW25hbWU9b3Blbmludm9pY2VfbWV0aG9kXTpjaGVja2VkJykudmFsKCk7XG4gICAgICAgICAgICBJbmdlbmljby5jbG9zZU1vZGFsKCdvcGVuaW52b2ljZS1zZWxlY3QtcGF5bWVudC1tb2RhbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBJbmdlbmljby5hZGRDb3VudHJpZXMoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9ICk7XG5cbiAgICAgICAgJChkb2N1bWVudCkub24oICdrZXl1cCcsICcucGF5bWVudC1tZXRob2RzLWxpc3QnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgY29uc3QgcXVlcnkgPSAkKHRoaXMpLnZhbCgpO1xuICAgICAgICAgICAgSW5nZW5pY28uZmlsdGVyUGF5bWVudE1ldGhvZHMocXVlcnkpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodHlwZW9mIGluc3RhbGxtZW50c19hbW91bnRfbWluICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgJCgnI2luc3RhbGxtZW50c19hbW91bnRfcmFuZ2UnKS5zbGlkZXIoe1xuICAgICAgICAgICAgICAgIHJhbmdlOiB0cnVlLFxuICAgICAgICAgICAgICAgIG1pbjogMSxcbiAgICAgICAgICAgICAgICBtYXg6IDI0LFxuICAgICAgICAgICAgICAgIHZhbHVlczogW2luc3RhbGxtZW50c19hbW91bnRfbWluLCBpbnN0YWxsbWVudHNfYW1vdW50X21heF0sXG4gICAgICAgICAgICAgICAgc2xpZGU6IGZ1bmN0aW9uIChldmVudCwgdWkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1pbl92YWx1ZSA9IHVpLnZhbHVlc1swXTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1heF92YWx1ZSA9IHVpLnZhbHVlc1sxXTtcbiAgICAgICAgICAgICAgICAgICAgJCgnW25hbWU9aW5zdGFsbWVudHNfZmxleF9pbnN0YWxtZW50c19taW5dJykudmFsKG1pbl92YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICQoJ1tuYW1lPWluc3RhbG1lbnRzX2ZsZXhfaW5zdGFsbWVudHNfbWF4XScpLnZhbChtYXhfdmFsdWUpO1xuXG4gICAgICAgICAgICAgICAgICAgICQoJyNpbnN0YWxsbWVudHNfYW1vdW50X3JhbmdlIC51aS1zbGlkZXItaGFuZGxlIGInKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGhhbmRsZXIgPSAkKCcjaW5zdGFsbG1lbnRzX2Ftb3VudF9yYW5nZSAudWktc2xpZGVyLWhhbmRsZScpO1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLmVxKDApLmFwcGVuZChcIjxiIGNsYXNzPSdhbW91bnQgbGVmdC1oYW5kbGVyJz48c3BhbiBpZD0nbWluJz5cIiArIG1pbl92YWx1ZSArIFwiPC9zcGFuPjwvYj5cIik7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXIuZXEoMSkuYXBwZW5kKFwiPGIgY2xhc3M9J2Ftb3VudCByaWdodC1oYW5kbGVyJz48c3BhbiBpZD0nbWF4Jz5cIiArIG1heF92YWx1ZSArIFwiPC9zcGFuPjwvYj5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsZXQgYW1vdW50X2hhbmRsZXIgPSAkKCcjaW5zdGFsbG1lbnRzX2Ftb3VudF9yYW5nZSAudWktc2xpZGVyLWhhbmRsZScpO1xuICAgICAgICAgICAgYW1vdW50X2hhbmRsZXIuZXEoMCkuYXBwZW5kKFwiPGIgY2xhc3M9J2Ftb3VudCBsZWZ0LWhhbmRsZXInPjxzcGFuIGlkPSdtaW4nPlwiICsgaW5zdGFsbG1lbnRzX2Ftb3VudF9taW4gKyBcIjwvc3Bhbj48L2I+XCIpO1xuICAgICAgICAgICAgYW1vdW50X2hhbmRsZXIuZXEoMSkuYXBwZW5kKFwiPGIgY2xhc3M9J2Ftb3VudCByaWdodC1oYW5kbGVyJz48c3BhbiBpZD0nbWF4Jz5cIiArIGluc3RhbGxtZW50c19hbW91bnRfbWF4ICsgXCI8L3NwYW4+PC9iPlwiKTtcblxuICAgICAgICAgICAgJCgnI2luc3RhbGxtZW50c19wZXJpb2RfcmFuZ2UnKS5zbGlkZXIoe1xuICAgICAgICAgICAgICAgIHJhbmdlOiB0cnVlLFxuICAgICAgICAgICAgICAgIG1pbjogMSxcbiAgICAgICAgICAgICAgICBtYXg6IDkwLFxuICAgICAgICAgICAgICAgIHZhbHVlczogW2luc3RhbGxtZW50c19wZXJpb2RfbWluLCBpbnN0YWxsbWVudHNfcGVyaW9kX21heF0sXG4gICAgICAgICAgICAgICAgc2xpZGU6IGZ1bmN0aW9uIChldmVudCwgdWkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1pbl92YWx1ZSA9IHVpLnZhbHVlc1swXTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1heF92YWx1ZSA9IHVpLnZhbHVlc1sxXTtcbiAgICAgICAgICAgICAgICAgICAgJCgnW25hbWU9aW5zdGFsbWVudHNfZmxleF9wZXJpb2RfbWluXScpLnZhbChtaW5fdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAkKCdbbmFtZT1pbnN0YWxtZW50c19mbGV4X3BlcmlvZF9tYXhdJykudmFsKG1heF92YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICQoJyNpbnN0YWxsbWVudHNfcGVyaW9kX3JhbmdlIC51aS1zbGlkZXItaGFuZGxlIGInKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGhhbmRsZXIgPSAkKCcjaW5zdGFsbG1lbnRzX3BlcmlvZF9yYW5nZSAudWktc2xpZGVyLWhhbmRsZScpO1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLmVxKDApLmFwcGVuZChcIjxiIGNsYXNzPSdhbW91bnQgbGVmdC1oYW5kbGVyJz48c3BhbiBpZD0nbWluJz5cIiArIG1pbl92YWx1ZSArIFwiPC9zcGFuPjwvYj5cIik7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXIuZXEoMSkuYXBwZW5kKFwiPGIgY2xhc3M9J2Ftb3VudCByaWdodC1oYW5kbGVyJz48c3BhbiBpZD0nbWF4Jz5cIiArIG1heF92YWx1ZSArIFwiPC9zcGFuPjwvYj5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsZXQgcGVyaW9kX2hhbmRsZXIgPSAkKCcjaW5zdGFsbG1lbnRzX3BlcmlvZF9yYW5nZSAudWktc2xpZGVyLWhhbmRsZScpO1xuICAgICAgICAgICAgcGVyaW9kX2hhbmRsZXIuZXEoMCkuYXBwZW5kKFwiPGIgY2xhc3M9J2Ftb3VudCBsZWZ0LWhhbmRsZXInPjxzcGFuIGlkPSdtaW4nPlwiICsgaW5zdGFsbG1lbnRzX3BlcmlvZF9taW4gKyBcIjwvc3Bhbj48L2I+XCIpO1xuICAgICAgICAgICAgcGVyaW9kX2hhbmRsZXIuZXEoMSkuYXBwZW5kKFwiPGIgY2xhc3M9J2Ftb3VudCByaWdodC1oYW5kbGVyJz48c3BhbiBpZD0nbWF4Jz5cIiArIGluc3RhbGxtZW50c19wZXJpb2RfbWF4ICsgXCI8L3NwYW4+PC9iPlwiKTtcblxuICAgICAgICAgICAgJCgnI2luc3RhbGxtZW50c19maXJzdF9yYW5nZScpLnNsaWRlcih7XG4gICAgICAgICAgICAgICAgcmFuZ2U6IHRydWUsXG4gICAgICAgICAgICAgICAgbWluOiAxLFxuICAgICAgICAgICAgICAgIG1heDogOTksXG4gICAgICAgICAgICAgICAgdmFsdWVzOiBbaW5zdGFsbG1lbnRzX2ZpcnN0X21pbiwgaW5zdGFsbG1lbnRzX2ZpcnN0X21heF0sXG4gICAgICAgICAgICAgICAgc2xpZGU6IGZ1bmN0aW9uIChldmVudCwgdWkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1pbl92YWx1ZSA9IHVpLnZhbHVlc1swXTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1heF92YWx1ZSA9IHVpLnZhbHVlc1sxXTtcbiAgICAgICAgICAgICAgICAgICAgJCgnW25hbWU9aW5zdGFsbWVudHNfZmxleF9maXJzdHBheW1lbnRfbWluXScpLnZhbChtaW5fdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAkKCdbbmFtZT1pbnN0YWxtZW50c19mbGV4X2ZpcnN0cGF5bWVudF9tYXhdJykudmFsKG1heF92YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICQoJyNpbnN0YWxsbWVudHNfZmlyc3RfcmFuZ2UgLnVpLXNsaWRlci1oYW5kbGUgYicpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaGFuZGxlciA9ICQoJyNpbnN0YWxsbWVudHNfZmlyc3RfcmFuZ2UgLnVpLXNsaWRlci1oYW5kbGUnKTtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlci5lcSgwKS5hcHBlbmQoXCI8YiBjbGFzcz0nYW1vdW50IGxlZnQtaGFuZGxlcic+PHNwYW4gaWQ9J21pbic+XCIgKyBtaW5fdmFsdWUgKyBcIiU8L3NwYW4+PC9iPlwiKTtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlci5lcSgxKS5hcHBlbmQoXCI8YiBjbGFzcz0nYW1vdW50IHJpZ2h0LWhhbmRsZXInPjxzcGFuIGlkPSdtYXgnPlwiICsgbWF4X3ZhbHVlICsgXCIlPC9zcGFuPjwvYj5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsZXQgZmlyc3RfaGFuZGxlciA9ICQoJyNpbnN0YWxsbWVudHNfZmlyc3RfcmFuZ2UgLnVpLXNsaWRlci1oYW5kbGUnKTtcbiAgICAgICAgICAgIGZpcnN0X2hhbmRsZXIuZXEoMCkuYXBwZW5kKFwiPGIgY2xhc3M9J2Ftb3VudCBsZWZ0LWhhbmRsZXInPjxzcGFuIGlkPSdtaW4nPlwiICsgaW5zdGFsbG1lbnRzX2ZpcnN0X21pbiArIFwiJTwvc3Bhbj48L2I+XCIpO1xuICAgICAgICAgICAgZmlyc3RfaGFuZGxlci5lcSgxKS5hcHBlbmQoXCI8YiBjbGFzcz0nYW1vdW50IHJpZ2h0LWhhbmRsZXInPjxzcGFuIGlkPSdtYXgnPlwiICsgaW5zdGFsbG1lbnRzX2ZpcnN0X21heCArIFwiJTwvc3Bhbj48L2I+XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgJCgnLmZvcm0tYnRuLm1hc2snKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBpbnB1dCA9ICQoJ1tuYW1lPVwiJyArICQodGhpcykuYXR0cigndG9nZ2xlJykgKydcIl0nKTtcbiAgICAgICAgICAgIGlmIChpbnB1dC5hdHRyKCd0eXBlJykgPT0gJ3Bhc3N3b3JkJykge1xuICAgICAgICAgICAgICAgICQodGhpcykudGV4dCgkKHRoaXMpLmRhdGEoJ2hpZGUnKSk7XG4gICAgICAgICAgICAgICAgaW5wdXQuYXR0cigndHlwZScsICd0ZXh0Jyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQodGhpcykudGV4dCgkKHRoaXMpLmRhdGEoJ3Nob3cnKSk7XG4gICAgICAgICAgICAgICAgaW5wdXQuYXR0cigndHlwZScsICdwYXNzd29yZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoO1xuICAgICAgICBpZiAodHlwZW9mKGhhc2gpICE9IFwidW5kZWZpbmVkXCIgJiYgaGFzaCAhPT0gbnVsbCAmJiBoYXNoICE9PSAnJykge1xuICAgICAgICAgICAgbGV0IHBhbmVsID0gJCgnI2NvbnRlbnQuYm9vdHN0cmFwIC5pbmdlbmljby1zZXR0aW5ncyAuZm9ybS13cmFwcGVyIC5wYW5lbC1mb290ZXInKTtcbiAgICAgICAgICAgIGlmIChoYXNoID09PSAnI3N1cHBvcnQnKSB7XG4gICAgICAgICAgICAgICAgLy8gSGlkZSBTYXZlIGJ1dHRvbiBpbiBib3R0b21cbiAgICAgICAgICAgICAgICBwYW5lbC5oaWRlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhbmVsLnNob3coKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJCgnLm5hdi10YWJzIGxpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgJCgnLnRhYi1jb250ZW50IC50YWItcGFuZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICQoJy5uYXYtdGFicyBsaSBhW2hyZWY9XCInICsgaGFzaCArICdcIl0nKS5wYXJlbnQoKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAkKCcudGFiLWNvbnRlbnQgJyArIGhhc2gpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICQoJyNjb25maWd1cmF0aW9uX2Zvcm0nKS5hdHRyKCdhY3Rpb24nLCB3aW5kb3cubG9jYXRpb24uaHJlZik7XG4gICAgICAgICAgICBJbmdlbmljby5jb25uZWN0RXhpc3RpbmdBY2NvdW50KCk7XG4gICAgICAgIH1cblxuICAgICAgICAkKCcubmF2LXRhYnMgbGkgYScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGxldCBoYXNoID0gdGhpcy5ocmVmLnNwbGl0KFwiI1wiKVsxXTtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gaGFzaDtcbiAgICAgICAgICAgICQoJyNjb25maWd1cmF0aW9uX2Zvcm0nKS5hdHRyKCdhY3Rpb24nLCB3aW5kb3cubG9jYXRpb24uaHJlZik7XG5cbiAgICAgICAgICAgIGxldCBwYW5lbCA9ICQoJyNjb250ZW50LmJvb3RzdHJhcCAuaW5nZW5pY28tc2V0dGluZ3MgLmZvcm0td3JhcHBlciAucGFuZWwtZm9vdGVyJyk7XG4gICAgICAgICAgICBpZiAoaGFzaCA9PT0gJ3N1cHBvcnQnKSB7XG4gICAgICAgICAgICAgICAgLy8gSGlkZSBTYXZlIGJ1dHRvbiBpbiBib3R0b21cbiAgICAgICAgICAgICAgICBwYW5lbC5oaWRlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhbmVsLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJChkb2N1bWVudCkua2V5ZG93bihmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IDkpIHsgIC8vdGFiIHByZXNzZWRcbiAgICAgICAgICAgICAgICBpZigkKCcubW9kYWwtYmFja2Ryb3AnKS5pcyhcIjp2aXNpYmxlXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgLy8gc3RvcHMgaXRzIGFjdGlvblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gMjcpIHsgIC8vZXNjIHByZXNzZWRcbiAgICAgICAgICAgICAgICBJbmdlbmljby5jbG9zZU1vZGFsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vRGlzYWJsZSBhY2NvdW50IHJlZ2lzdHJhdGlvbiBzdWJtaXQgYnV0dG9uXG4gICAgICAgIC8vaWYgdGVybXMgYWdyZWVtZW50IGNoZWNrYm94IHVuY2hlY2tlZFxuICAgICAgICB2YXIgdGhlX3Rlcm1zID0gJCgnI2FncmVlbWVudCcpO1xuICAgICAgICBpZiAodGhlX3Rlcm1zLmlzKFwiOmNoZWNrZWRcIikpIHtcbiAgICAgICAgICAgICQoJyNyZWdpc3RyYXRpb24tYnRuJykucmVtb3ZlQXR0cignZGlzYWJsZWQnKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoJyNyZWdpc3RyYXRpb24tYnRuJykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGVfdGVybXMuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5pcyhcIjpjaGVja2VkXCIpKSB7XG4gICAgICAgICAgICAgICAgJCgnI3JlZ2lzdHJhdGlvbi1idG4nKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcjcmVnaXN0cmF0aW9uLWJ0bicpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJykuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJ1tuYW1lPXN1Ym1pdF9zYXZlX2NvdW50cmllc10nKS5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBJbmdlbmljby5hZGRDb3VudHJpZXMoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnLnBheW1lbnRwYWdlX3RlbXBsYXRlIGlucHV0W3R5cGU9ZmlsZV0nKS5saXZlKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBmaWxlbmFtZSA9ICQoJ2lucHV0W3R5cGU9ZmlsZV0nKS52YWwoKS5zcGxpdCgnXFxcXCcpLnBvcCgpO1xuICAgICAgICAgICAgJCgnLnBheW1lbnRwYWdlX3RlbXBsYXRlIC51cGxvYWQtbGFiZWwnKS5odG1sKGZpbGVuYW1lKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHBhdHRlcm4gOiAvW2EtekEtWjAtOV9cXC1cXCtcXC5dLyxcblxuICAgIGdldFJhbmRvbUJ5dGUgOiBmdW5jdGlvbigpXG4gICAge1xuICAgICAgICBpZih3aW5kb3cuY3J5cHRvICYmIHdpbmRvdy5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkoMSk7XG4gICAgICAgICAgICB3aW5kb3cuY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhyZXN1bHQpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFswXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKHdpbmRvdy5tc0NyeXB0byAmJiB3aW5kb3cubXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkoMSk7XG4gICAgICAgICAgICB3aW5kb3cubXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKHJlc3VsdCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0WzBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1Nik7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZ2VuZXJhdGVIYXNoIDogZnVuY3Rpb24oZmllbGQsIGxlbmd0aClcbiAgICB7XG4gICAgICAgIGxldCBnZW5lcmF0ZWRfaGFzaCA9IEFycmF5LmFwcGx5KG51bGwsIHsnbGVuZ3RoJzogbGVuZ3RofSlcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24oKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgICAgICAgICAgd2hpbGUodHJ1ZSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFN0cmluZy5mcm9tQ2hhckNvZGUodGhpcy5nZXRSYW5kb21CeXRlKCkpO1xuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnBhdHRlcm4udGVzdChyZXN1bHQpKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgdGhpcylcbiAgICAgICAgICAgIC5qb2luKCcnKTtcblxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZShmaWVsZClbMF0udmFsdWUgPSBnZW5lcmF0ZWRfaGFzaDtcbiAgICB9LFxuXG4gICAgY29weVZhbHVlOiBmdW5jdGlvbiAoZmllbGQsIGNvcHlfcmVzcG9uc2VfY29udGFpbmVyKSB7XG4gICAgICAgIGxldCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7XG4gICAgICAgIGxldCB2YWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKGZpZWxkKVswXS52YWx1ZTtcbiAgICAgICAgZWwudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdyZWFkb25seScsICcnKTtcbiAgICAgICAgZWwuc3R5bGUgPSB7cG9zaXRpb246ICdhYnNvbHV0ZScsIGxlZnQ6ICctOTk5OXB4J307XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICBlbC5zZWxlY3QoKTtcbiAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NvcHknKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlbCk7XG4gICAgICAgICQoXCIuY29weS1yZXNwb25zZVtkYXRhLWNvcHk9J1wiICsgY29weV9yZXNwb25zZV9jb250YWluZXIgK1wiJ11cIikuc2xpZGVEb3duKCk7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICQoXCIuY29weS1yZXNwb25zZVtkYXRhLWNvcHk9J1wiICsgY29weV9yZXNwb25zZV9jb250YWluZXIgK1wiJ11cIikuc2xpZGVVcCgpO1xuICAgICAgICB9LCAzMDAwKTtcbiAgICB9LFxuXG4gICAgY29weUxpbms6IGZ1bmN0aW9uIChsaW5rLCBjb3B5X3Jlc3BvbnNlX2NvbnRhaW5lcikge1xuICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgICAgICBlbC52YWx1ZSA9IGxpbms7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgncmVhZG9ubHknLCAnJyk7XG4gICAgICAgIGVsLnN0eWxlID0ge3Bvc2l0aW9uOiAnYWJzb2x1dGUnLCBsZWZ0OiAnLTk5OTlweCd9O1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsKTtcbiAgICAgICAgZWwuc2VsZWN0KCk7XG4gICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjb3B5Jyk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZWwpO1xuICAgICAgICAkKFwiLmNvcHktcmVzcG9uc2VbZGF0YS1jb3B5PSdcIiArIGNvcHlfcmVzcG9uc2VfY29udGFpbmVyICtcIiddXCIpLnNsaWRlRG93bigpO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAkKFwiLmNvcHktcmVzcG9uc2VbZGF0YS1jb3B5PSdcIiArIGNvcHlfcmVzcG9uc2VfY29udGFpbmVyICtcIiddXCIpLnNsaWRlVXAoKTtcbiAgICAgICAgfSwgNjAwMCk7XG4gICAgfSxcblxuICAgIHRvZ2dsZVRvb2x0aXA6IGZ1bmN0aW9uICh0b29sdGlwKSB7XG4gICAgICAgIGxldCB4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodG9vbHRpcCk7XG4gICAgICAgIGlmICh4LnN0eWxlLmRpc3BsYXkgPT09ICdub25lJykge1xuICAgICAgICAgICAgeC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHguc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBPcGVuIEJvb3RzdHJhcCBNb2RhbFxuICAgICAqXG4gICAgICogQHBhcmFtIG1vZGFsX2lkXG4gICAgICogQHBhcmFtIG9wdGlvbnNcbiAgICAgKiBAcGFyYW0gb25TaG93XG4gICAgICogQHJldHVybiB7alF1ZXJ5fEhUTUxFbGVtZW50fVxuICAgICAqL1xuICAgIG9wZW5Nb2RhbDogZnVuY3Rpb24gKG1vZGFsX2lkLCBvcHRpb25zLCBvblNob3cpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBvblNob3cgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBvblNob3cgPSBmdW5jdGlvbiAoKSB7fTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBlbG0gPSAkKCcjJyArIG1vZGFsX2lkKSxcbiAgICAgICAgICAgIG9mZnNldCA9ICQod2luZG93KS5zY3JvbGxUb3AoKSAtIDI1MDtcblxuICAgICAgICAvLyBTaG93IG1vZGFsXG4gICAgICAgIGVsbS5maW5kKCcubW9kYWwtZGlhbG9nJykuYWRkQ2xhc3MoJ21vZGFsLWRpYWxvZy1zY3JvbGxhYmxlJyk7XG4gICAgICAgIGVsbS5tb2RhbChvcHRpb25zKTtcbiAgICAgICAgZWxtLm9uKCdzaG93bi5icy5tb2RhbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93JywgJ2F1dG8nKTtcbiAgICAgICAgICAgIC8vZWxtLmFkZENsYXNzKCdpbicpO1xuICAgICAgICAgICAgLy9lbG0uY3NzKCd0b3AnLCBvZmZzZXQgKyAncHgnKTtcblxuICAgICAgICAgICAgLy8gQHRvZG9cbiAgICAgICAgICAgIC8vJC5zY3JvbGxUbyhlbG0pO1xuXG4gICAgICAgICAgICAkKFwiaHRtbCwgYm9keVwiKS5hbmltYXRlKHsgc2Nyb2xsVG9wOiAwIH0sIFwic2xvd1wiKTtcblxuICAgICAgICAgICAgb25TaG93KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGVsbS5vbignaGlkZS5icy5tb2RhbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vZWxtLnJlbW92ZUNsYXNzKCdpbicpLmhpZGUoKTtcbiAgICAgICAgICAgIC8vJCgnLm1vZGFsLWJhY2tkcm9wJykuaGlkZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gZWxtO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDbG9zZSBCb290c3RyYXAgTW9kYWxcbiAgICAgKlxuICAgICAqIEBwYXJhbSBtb2RhbF9pZFxuICAgICAqIEBwYXJhbSBvbkNsb3NlXG4gICAgICogQHJldHVybiB7alF1ZXJ5fEhUTUxFbGVtZW50fVxuICAgICAqL1xuICAgIGNsb3NlTW9kYWw6IGZ1bmN0aW9uIChtb2RhbF9pZCwgb25DbG9zZSkge1xuICAgICAgICBsZXQgZWxtID0gJCgnLmluZ2VuaWNvLW1vZGFsJyk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBtb2RhbF9pZCAhPT0gJ3VuZGVmaW5lZCcgfHwgIW1vZGFsX2lkKSB7XG4gICAgICAgICAgICBlbG0gPSAkKCcjJyArIG1vZGFsX2lkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2Ygb25DbG9zZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIG9uQ2xvc2UgPSBmdW5jdGlvbiAoKSB7fTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVsbS5tb2RhbCgnaGlkZScpO1xuICAgICAgICBlbG0ub24oJ2hpZGUuYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvL29uQ2xvc2UoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBvbkNsb3NlKCk7XG4gICAgICAgIH0sIDMwMCk7XG5cbiAgICAgICAgcmV0dXJuIGVsbTtcblxuICAgICAgICAvLyQobW9kYWwgKyAnLmluZ2VuaWNvLW1vZGFsJykucmVtb3ZlQ2xhc3MoJ2luJykuaGlkZSgpO1xuICAgICAgICAvLyQoJy5tb2RhbC1iYWNrZHJvcCcpLmhpZGUoKTtcbiAgICAgICAgLy8kKG1vZGFsICsgJy5pbmdlbmljby1tb2RhbCcpLm1vZGFsKCdoaWRlJylcbiAgICAgICAgLy9lbG0ub24oJ2hpZGUuYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vICAgIGVsbS5yZW1vdmVDbGFzcygnaW4nKS5oaWRlKCk7XG4gICAgICAgIC8vICAgICQoJy5tb2RhbC1iYWNrZHJvcCcpLmhpZGUoKTtcbiAgICAgICAgLy99KTtcbiAgICB9LFxuXG4gICAgZmlsdGVyQ291bnRyaWVzOiBmdW5jdGlvbiAocXVlcnkpIHtcbiAgICAgICAgdmFyIHNlbGVjdGVkX2NvdW50cmllcyA9ICcnO1xuICAgICAgICAkKCcjY291bnRyaWVzLWxpc3QgW3R5cGU9XCJjaGVja2JveFwiXTpjaGVja2VkJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGVjdGVkX2NvdW50cmllcyArPSB0aGlzLnZhbHVlICsgJ3wnO1xuICAgICAgICB9KS5wcm9taXNlKCkuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQuYWpheChpbmdlbmljb19hamF4X3VybCwge1xuICAgICAgICAgICAgICAgICdtZXRob2QnOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgJ2RhdGEnOiB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5IDogcXVlcnksXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ2ZpbHRlcl9jb3VudHJpZXMnLFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZF9jb3VudHJpZXM6IHNlbGVjdGVkX2NvdW50cmllc1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJ2RhdGFUeXBlJzogJ2pzb24nXG4gICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAkKCcjY291bnRyaWVzLWxpc3QgdWwnKS5odG1sKGRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBmaWx0ZXJQYXltZW50TWV0aG9kczogZnVuY3Rpb24gKHF1ZXJ5KSB7XG4gICAgICAgICQuYWpheChpbmdlbmljb19hamF4X3VybCwge1xuICAgICAgICAgICAgJ21ldGhvZCc6ICdQT1NUJyxcbiAgICAgICAgICAgICdkYXRhJzoge1xuICAgICAgICAgICAgICAgIHF1ZXJ5IDogcXVlcnksXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnZmlsdGVyX3BheW1lbnRfbWV0aG9kcydcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnZGF0YVR5cGUnOiAnanNvbidcbiAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAkKCcjcGF5bWVudC1tZXRob2RzLWxpc3QgdWwnKS5odG1sKGRhdGEpO1xuXG4gICAgICAgICAgICBJbmdlbmljby5nZXRTZWxlY3RlZFBheW1lbnRNZXRob2RzKGZ1bmN0aW9uIChwYXltZW50X21ldGhvZHMpIHtcbiAgICAgICAgICAgICAgICBJbmdlbmljby5kaXNhYmxlQWZ0ZXJwYXlPcktsYXJuYU1ldGhvZHMocGF5bWVudF9tZXRob2RzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IFNlbGVjdGVkIFBheW1lbnQgTWV0aG9kc1xuICAgICAqIEBwYXJhbSBjYWxsYmFja1xuICAgICAqL1xuICAgIGdldFNlbGVjdGVkUGF5bWVudE1ldGhvZHM6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgIC8vIEBzZWUgI3NlbGVjdGVkX3BheW1lbnRfbWV0aG9kc1xuICAgICAgICBsZXQgcGF5bWVudF9tZXRob2RzID0gJChcIiNwbV9saXN0XCIpLnZhbCgpO1xuXG4gICAgICAgIC8vIEFwcGVuZCBuZXcgbWV0aG9kc1xuICAgICAgICBJbmdlbmljby5nZXRNb2RhbFBheW1lbnRNZXRob2RzKGZ1bmN0aW9uIChzZWxlY3RlZCkge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHBheW1lbnRfbWV0aG9kcy5jb25jYXQoc2VsZWN0ZWQpO1xuICAgICAgICAgICAgY2FsbGJhY2socmVzdWx0KTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCBTZWxlY3RlZCBQYXltZW50IE1ldGhvZHMgaW4gTW9kYWxcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2tcbiAgICAgKi9cbiAgICBnZXRNb2RhbFBheW1lbnRNZXRob2RzOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgbGV0IHBheW1lbnRfbWV0aG9kcyA9IFtdO1xuXG4gICAgICAgICQoJyNwYXltZW50LW1ldGhvZHMtbGlzdCBpbnB1dFtuYW1lPVwicGF5bWVudF9tZXRob2RzW11cIl06Y2hlY2tlZCcpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbGV0IG1ldGhvZCA9ICQodGhpcykudmFsKCk7XG4gICAgICAgICAgICBwYXltZW50X21ldGhvZHMucHVzaChtZXRob2QpO1xuICAgICAgICB9KS5wcm9taXNlKCkuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKHBheW1lbnRfbWV0aG9kcyk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBEaXNhYmxlIEFmdGVycGF5IG9yIEtsYXJuYSBpbiBQYXltZW50IExpc3QgTW9kYWxcbiAgICAgKiBAcGFyYW0gcGF5bWVudF9tZXRob2RzXG4gICAgICovXG4gICAgZGlzYWJsZUFmdGVycGF5T3JLbGFybmFNZXRob2RzOiBmdW5jdGlvbihwYXltZW50X21ldGhvZHMpIHtcbiAgICAgICAgLy8gRGlzYWxsb3cgdXNhZ2Ugb2YgQWZ0ZXJwYXkgYW5kIEtsYXJuYSBpbiBvbmUgdGltZVxuICAgICAgICBsZXQgYWZ0ZXJwYXkgPSAkKCcjcGF5bWVudC1tZXRob2RzLWxpc3QgaW5wdXRbdmFsdWU9XCJhZnRlcnBheVwiXScpLFxuICAgICAgICAgICAga2xhcm5hID0gJCgnI3BheW1lbnQtbWV0aG9kcy1saXN0IGlucHV0W3ZhbHVlPVwia2xhcm5hXCJdJyksXG4gICAgICAgICAgICBhbGwgPSAkKCcjcGF5bWVudC1tZXRob2RzLWxpc3QgaW5wdXRbbmFtZT1cInBheW1lbnRfbWV0aG9kc1tdXCJdJyk7XG5cbiAgICAgICAgaWYgKHBheW1lbnRfbWV0aG9kcy5pbmNsdWRlcygnYWZ0ZXJwYXknKSkge1xuICAgICAgICAgICAgYWZ0ZXJwYXkucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSkucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICBrbGFybmEucHJvcCgnZGlzYWJsZWQnLCB0cnVlKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgfSBlbHNlIGlmIChwYXltZW50X21ldGhvZHMuaW5jbHVkZXMoJ2tsYXJuYScpKSB7XG4gICAgICAgICAgICBrbGFybmEucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSkucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICBhZnRlcnBheS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYWxsLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHJlbW92ZVBheW1lbnRNZXRob2Q6IGZ1bmN0aW9uIChwYXltZW50X21ldGhvZCkge1xuICAgICAgICAkKFwiI3BtX2xpc3Qgb3B0aW9uW3ZhbHVlPSdcIiArIHBheW1lbnRfbWV0aG9kICsgXCInXVwiKS5yZW1vdmUoKTtcbiAgICAgICAgJCgnbGkuJyArIHBheW1lbnRfbWV0aG9kKS5mYWRlT3V0KDEwMDAsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGFkZFBheW1lbnRNZXRob2Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gQ3VycmVudGx5IHNlbGVjdGVkIG1ldGhvZHNcbiAgICAgICAgSW5nZW5pY28uZ2V0U2VsZWN0ZWRQYXltZW50TWV0aG9kcyhmdW5jdGlvbiAocGF5bWVudF9tZXRob2RzKSB7XG4gICAgICAgICAgICAkLmFqYXgoaW5nZW5pY29fYWpheF91cmwsIHtcbiAgICAgICAgICAgICAgICAnbWV0aG9kJzogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICdkYXRhJzoge1xuICAgICAgICAgICAgICAgICAgICBwYXltZW50X21ldGhvZHM6IHBheW1lbnRfbWV0aG9kcyxcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnZmV0Y2hfcGF5bWVudF9tZXRob2RzJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJ2RhdGFUeXBlJzogJ2pzb24nXG4gICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAkKCcjc2VsZWN0ZWRfcGF5bWVudF9tZXRob2RzJykuaHRtbChkYXRhKTtcbiAgICAgICAgICAgICAgICBJbmdlbmljby5jbG9zZU1vZGFsKCdwYXltZW50LW1ldGhvZHMtbGlzdCcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBnZXRQYXltZW50TWV0aG9kTW9kYWw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gQ3VycmVudGx5IHNlbGVjdGVkIG1ldGhvZHNcbiAgICAgICAgbGV0IHBheW1lbnRfbWV0aG9kcyA9ICQoXCIjcG1fbGlzdFwiKS52YWwoKTtcblxuICAgICAgICAkLmFqYXgoaW5nZW5pY29fYWpheF91cmwsIHtcbiAgICAgICAgICAgICdkYXRhJzoge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ3BheW1lbnRfbWV0aG9kX21vZGFsJyxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZDogcGF5bWVudF9tZXRob2RzXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2RhdGFUeXBlJzogJ2pzb24nXG4gICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgJCgnI3BheW1lbnQtbWV0aG9kcy1saXN0IC5tZXRob2RzLWxpc3QnKS5odG1sKGRhdGEpO1xuXG4gICAgICAgICAgICBJbmdlbmljby5nZXRTZWxlY3RlZFBheW1lbnRNZXRob2RzKGZ1bmN0aW9uIChwYXltZW50X21ldGhvZHMpIHtcbiAgICAgICAgICAgICAgICBJbmdlbmljby5kaXNhYmxlQWZ0ZXJwYXlPcktsYXJuYU1ldGhvZHMocGF5bWVudF9tZXRob2RzKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBoYXNTb21lUGFyZW50VGhlQ2xhc3M6IGZ1bmN0aW9uKGVsZW1lbnQsIGNsYXNzbmFtZSkge1xuICAgICAgICBpZihlbGVtZW50LnRhZ05hbWUgPT09ICdIVE1MJykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbGVtZW50LmNsYXNzTmFtZS5zcGxpdCgnICcpLmluZGV4T2YoY2xhc3NuYW1lKSA+PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBlbGVtZW50LnBhcmVudE5vZGUgJiYgdGhpcy5oYXNTb21lUGFyZW50VGhlQ2xhc3MoZWxlbWVudC5wYXJlbnROb2RlLCBjbGFzc25hbWUpO1xuICAgIH0sXG5cbiAgICBzaG93TWlncmF0aW9uVUk6IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcuaW5zdGFsbGF0aW9uLW9wdGlvbnMnKS5oaWRlKCk7XG4gICAgICAgICQoJyNtaWdyYXRpb24tZnJtJykuc2hvdygpO1xuICAgICAgICAkKCcjY3JlYXRlLWFjY291bnQtZnJtJykuaGlkZSgpO1xuICAgICAgICAkKCcjY29uZmlndXJhdGlvbl9mb3JtJykuaGlkZSgpO1xuICAgICAgICAkKCcuaW5nZW5pY28tc2V0dGluZ3MsIC5pbmdlbmljby1oZWFkZXInKS5hZGRDbGFzcygnaW5zdGFsbCcpO1xuICAgICAgICAvLyQoJy5pbnN0YWxsYXRpb24tdmlldycpLnNob3coKTtcbiAgICAgICAgLy8kKCcuc2V0dGluZ3MtZm9ybScpLmhpZGUoKTtcbiAgICAgICAgJCgnLmFjY291bnQtY3JlYXRpb24tcHJvZ3Jlc3MgLnByb2dyZXNzLWhhbGYnKS5hZGRDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgICAgLy8gSGVhZGVyIGxpbmtzXG4gICAgICAgICQoJy5oZWFkZXItbGlua3MnKS5zaG93KCk7XG4gICAgICAgICQoJy5jcmVhdGUtYWNjb3VudC5jcmVhdGlvbicpLmhpZGUoKTtcbiAgICAgICAgJCgnLmNyZWF0ZS1hY2NvdW50LmNvbmZpZ3VyYXRpb24nKS5zaG93KCk7XG4gICAgICAgICQoJy5jcmVhdGUtYWNjb3VudC1mb3JtIC5wYW5lbC1mb290ZXInKS5zaG93KCk7XG4gICAgfSxcbiAgICBcbiAgICBjcmVhdGVBY2NvdW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy5pbnN0YWxsYXRpb24tb3B0aW9ucycpLmhpZGUoKTtcbiAgICAgICAgJCgnLmNyZWF0ZS1hY2NvdW50LWZvcm0nKS5zaG93KCk7XG4gICAgICAgICQoJy5pbmdlbmljby1zZXR0aW5ncywgLmluZ2VuaWNvLWhlYWRlcicpLmFkZENsYXNzKCdpbnN0YWxsJyk7XG4gICAgICAgICQoJy5pbnN0YWxsYXRpb24tdmlldycpLnNob3coKTtcbiAgICAgICAgJCgnLnNldHRpbmdzLWZvcm0nKS5oaWRlKCk7XG4gICAgICAgICQoJy5hY2NvdW50LWNyZWF0aW9uLXByb2dyZXNzIC5wcm9ncmVzcy1oYWxmJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgIC8vIEhlYWRlciBsaW5rc1xuICAgICAgICAkKCcuaGVhZGVyLWxpbmtzJykuc2hvdygpO1xuICAgICAgICAkKCcuY3JlYXRlLWFjY291bnQuY3JlYXRpb24nKS5oaWRlKCk7XG4gICAgICAgICQoJy5jcmVhdGUtYWNjb3VudC5jb25maWd1cmF0aW9uJykuc2hvdygpO1xuICAgICAgICAkKCcuY3JlYXRlLWFjY291bnQtZm9ybSAucGFuZWwtZm9vdGVyJykuc2hvdygpO1xuXG4gICAgICAgICQoJyNtaWdyYXRpb24tZnJtJykuaGlkZSgpO1xuICAgIH0sXG4gICAgXG4gICAgY29ubmVjdEV4aXN0aW5nQWNjb3VudDogZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcuaW5zdGFsbGF0aW9uLW9wdGlvbnMnKS5oaWRlKCk7XG4gICAgICAgICQoJy5zZXR0aW5ncy1mb3JtJykuY3NzKCdkaXNwbGF5JywgJ2dyaWQnKTtcbiAgICAgICAgJCgnLmluZ2VuaWNvLWhlYWRlciAuYnRuLXRvb2xiYXInKS5zaG93KCk7XG4gICAgICAgICQoJy5pbmdlbmljby1zZXR0aW5ncywgLmluZ2VuaWNvLWhlYWRlcicpLnJlbW92ZUNsYXNzKCdpbnN0YWxsJyk7XG4gICAgICAgICQoJy5pbnN0YWxsYXRpb24tdmlldycpLmhpZGUoKTtcbiAgICAgICAgJCgnLnJlZ2lzdHJhdGlvbi1jb21wbGV0ZScpLmhpZGUoKTtcbiAgICAgICAgJCgnLmFjY291bnQtY3JlYXRpb24tcHJvZ3Jlc3MsIC5pbmdlbmljby1oZWFkZXInKS5yZW1vdmVDbGFzcygnZG9uZScpO1xuICAgICAgICAkKCcuaGVhZGVyLWxpbmtzJykuc2hvdygpO1xuXG4gICAgICAgIC8vIEhlYWRlciBsaW5rc1xuICAgICAgICAkKCcuY3JlYXRlLWFjY291bnQuY3JlYXRpb24nKS5zaG93KCk7XG4gICAgICAgICQoJy5jcmVhdGUtYWNjb3VudC5jb25maWd1cmF0aW9uJykuaGlkZSgpO1xuICAgIH0sXG5cbiAgICBiYWNrVG9JbnN0YWxsYXRpb246IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cblxuICAgICAgICAkKCcuaW5zdGFsbGF0aW9uLXZpZXcnKS5zaG93KCk7XG4gICAgICAgICQoJy5pbnN0YWxsYXRpb24tb3B0aW9ucycpLnNob3coKTtcbiAgICAgICAgJCgnLmNyZWF0ZS1hY2NvdW50LWZvcm0nKS5oaWRlKCk7XG4gICAgICAgICQoJy5hY2NvdW50LWNyZWF0aW9uLXByb2dyZXNzIC5wcm9ncmVzcy1oYWxmJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgIC8vIEhlYWRlciBsaW5rc1xuICAgICAgICAkKCcuaGVhZGVyLWxpbmtzJykuc2hvdygpO1xuICAgICAgICAkKCcuY3JlYXRlLWFjY291bnQuY3JlYXRpb24nKS5oaWRlKCk7XG4gICAgICAgICQoJy5jcmVhdGUtYWNjb3VudC5jb25maWd1cmF0aW9uJykuc2hvdygpO1xuICAgIH0sXG5cbiAgICByZWdpc3RlckFjY291bnQ6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmICgkKCcuaW5zdGFsbGF0aW9uLWZvcm0gW25hbWU9Y29tcGFueV9uYW1lXScpLnZhbCgpLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVFbWFpbCgkKCcuaW5zdGFsbGF0aW9uLWZvcm0gW25hbWU9YWNjb3VudF9lbWFpbF0nKS52YWwoKSkgJiZcbiAgICAgICAgICAgICQoJy5pbnN0YWxsYXRpb24tZm9ybSAjYWdyZWVtZW50JykuaXMoXCI6Y2hlY2tlZFwiKSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgJC5hamF4KGluZ2VuaWNvX2FqYXhfdXJsLCB7XG4gICAgICAgICAgICAgICAgJ2RhdGEnOiB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ3JlZ2lzdGVyX2FjY291bnQnLFxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50X2luZm86ICQoJy5pbnN0YWxsYXRpb24tZm9ybScpLnNlcmlhbGl6ZSgpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAnZGF0YVR5cGUnOiAnanNvbidcbiAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICQoJy5pbnN0YWxsYXRpb24tZm9ybScpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKCcucmVnaXN0cmF0aW9uLWNvbXBsZXRlJykuY3NzKCdkaXNwbGF5JywgJ2lubGluZS1ibG9jaycpO1xuICAgICAgICAgICAgICAgICQoJy5hY2NvdW50LWNyZWF0aW9uLXByb2dyZXNzIC5wcm9ncmVzcy1oYWxmJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICQoJy5hY2NvdW50LWNyZWF0aW9uLXByb2dyZXNzLCAuaW5nZW5pY28taGVhZGVyJykuYWRkQ2xhc3MoJ2RvbmUnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHZhbGlkYXRlRW1haWw6IGZ1bmN0aW9uIChlbWFpbCkge1xuICAgICAgICB2YXIgcGF0dGVybiA9IC9eKFtcXHctXFwuXSspQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuKXwoKFtcXHctXStcXC4pKykpKFthLXpBLVpdezIsNH18WzAtOV17MSwzfSkoXFxdPykkLztcblxuICAgICAgICByZXR1cm4gJC50cmltKGVtYWlsKS5tYXRjaChwYXR0ZXJuKSA/IHRydWUgOiBmYWxzZTtcbiAgICB9LFxuXG4gICAgYWRkQ291bnRyaWVzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjb3VudHJpZXMgPSBbXTtcbiAgICAgICAgdmFyIG9wZW5pbnZvaWNlX2NvdW50cmllcyA9IFtdO1xuICAgICAgICAkKCcjY291bnRyaWVzLWxpc3QgW3R5cGU9Y2hlY2tib3hdJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY291bnRyeV9jb2RlID0gJCh0aGlzKS52YWwoKSxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWwgPSAkKHRoaXMpLmNsb3Nlc3QoJy5sYWJlbC1jb250YWluZXInKS50ZXh0KCk7XG5cbiAgICAgICAgICAgICAgICAvLyBHZXQgY291bnRyeSBuYW1lIG9mIE9wZW5JbnZvaWNlXG4gICAgICAgICAgICAgICAgaWYgKFsnU0UnLCAnRkknLCAnREsnLCAnTk8nLCdERScsICdOTCddLmluZGV4T2YoY291bnRyeV9jb2RlKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wZW5pbnZvaWNlX2NvdW50cmllcy5wdXNoKGxhYmVsKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb3VudHJpZXMucHVzaChjb3VudHJ5X2NvZGUpO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLnByb21pc2UoKS5kb25lKCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICgoY291bnRyaWVzLmluZGV4T2YoJ0RFJykgPiAtMSB8fCBjb3VudHJpZXMuaW5kZXhPZignTkwnKSA+IC0xKSAmJiB0eXBlb2Ygd2luZG93Lk9QRU5JTlZPSUNFX01FVEhPRCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBsZXQgbGFiZWwgPSAkKCcjb3Blbmludm9pY2Vfc2VsZWN0ZWQyJykuaHRtbCgpO1xuICAgICAgICAgICAgICAgICQoJyNvcGVuaW52b2ljZV9zZWxlY3RlZDInKS5odG1sKGxhYmVsLnJlcGxhY2UoJyVjb3VudHJ5JScsIG9wZW5pbnZvaWNlX2NvdW50cmllcy5qb2luKCcsICcpKSk7XG5cbiAgICAgICAgICAgICAgICBJbmdlbmljby5jbG9zZU1vZGFsKGZhbHNlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIEluZ2VuaWNvLm9wZW5Nb2RhbCgnb3Blbmludm9pY2Utc2VsZWN0LXBheW1lbnQtbW9kYWwnKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBJbmdlbmljby5mZXRjaFBheW1lbnRNZXRob2RzKGNvdW50cmllcywgd2luZG93Lk9QRU5JTlZPSUNFX01FVEhPRCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gKTtcbiAgICB9LFxuXG4gICAgZmV0Y2hQYXltZW50TWV0aG9kczogZnVuY3Rpb24gKGNvdW50cmllcywgb3Blbmludm9pY2VfbWV0aG9kKSB7XG4gICAgICAgIHJldHVybiAkLmFqYXgoaW5nZW5pY29fYWpheF91cmwsIHtcbiAgICAgICAgICAgICdtZXRob2QnOiAnUE9TVCcsXG4gICAgICAgICAgICAnZGF0YSc6IHtcbiAgICAgICAgICAgICAgICBjb3VudHJpZXM6IGNvdW50cmllcyxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdmZXRjaF9tZXRob2RzX2J5X2NvdW50cmllcycsXG4gICAgICAgICAgICAgICAgb3Blbmludm9pY2U6IG9wZW5pbnZvaWNlX21ldGhvZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdkYXRhVHlwZSc6ICdqc29uJ1xuICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICQoJyNzZWxlY3RlZF9wYXltZW50X21ldGhvZHMnKS5odG1sKGRhdGEpO1xuICAgICAgICAgICAgSW5nZW5pY28uY2xvc2VNb2RhbCgnY291bnRyaWVzLWxpc3QnKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFkZCBtZXNzYWdlIHRvIG1pZ3JhdGlvbiBsb2dcbiAgICAgKiBAcGFyYW0gbWVzc2FnZVxuICAgICAqL1xuICAgIGFkZE1pZ3JhdGlvbkxvZzogZnVuY3Rpb24obWVzc2FnZSkge1xuICAgICAgICBsZXQgZWwgPSAkKCcjbWlncmF0aW9uLWxvZ3MnKTtcbiAgICAgICAgZWwuYXBwZW5kKG1lc3NhZ2UgKyBcIlxcclxcblwiKTtcbiAgICAgICAgZWwuc2Nyb2xsVG9wKGVsWzBdLnNjcm9sbEhlaWdodCAtIGVsLmhlaWdodCgpKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2FsbCBBSkFYIFJlcXVlc3RcbiAgICAgKiBAcGFyYW0gYWN0aW9uXG4gICAgICogQHBhcmFtIGNhbGxiYWNrXG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKi9cbiAgICBkb01pZ3JhdGlvbkFjdGlvbjogZnVuY3Rpb24oYWN0aW9uLCBjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gJC5hamF4KHdpbmRvdy5taWdyYXRpb25fYWpheF91cmwsIHtcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IGFjdGlvblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbidcbiAgICAgICAgfSkuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICBkYXRhLmRhdGEuZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpbmRleCwgYXJyKSB7XG4gICAgICAgICAgICAgICAgSW5nZW5pY28uYWRkTWlncmF0aW9uTG9nKGl0ZW0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghZGF0YS5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YS5kYXRhLCBkYXRhKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSkuZmFpbChmdW5jdGlvbiAoanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgICBJbmdlbmljby5hZGRNaWdyYXRpb25Mb2coSlNPTi5zdHJpbmdpZnkoZXJyb3JUaHJvd24pKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yVGhyb3duLCB7fSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTdGFydCBNaWdyYXRpb25cbiAgICAgKi9cbiAgICBkb01pZ3JhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYXN5bmMuc2VyaWVzKHtcbiAgICAgICAgICAgIHN0ZXAxOiBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIEluZ2VuaWNvLmRvTWlncmF0aW9uQWN0aW9uKCdzdGVwMScsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdGVwMjogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBJbmdlbmljby5kb01pZ3JhdGlvbkFjdGlvbignc3RlcDInLCBjYWxsYmFjayk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3RlcDM6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgSW5nZW5pY28uZG9NaWdyYXRpb25BY3Rpb24oJ3N0ZXAzJywgY2FsbGJhY2spO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN0ZXA0OiBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIEluZ2VuaWNvLmRvTWlncmF0aW9uQWN0aW9uKCdzdGVwNCcsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdGVwNTogZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgSW5nZW5pY28uYWRkTWlncmF0aW9uTG9nKCdJbXBvcnQgQWxpYXNlcy4uLicpO1xuICAgICAgICAgICAgICAgIEluZ2VuaWNvLmRvTWlncmF0aW9uQWN0aW9uKCdhbGlhc2VzX2luZm8nLCBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhbGlhc2VzID0gZGF0YS5hbGlhc2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWxpYXNlc19jb3VudCA9IGFsaWFzZXMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWxpYXNlc19pbXBvcnRlZCA9IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUHJvY2VzcyBBbGlhc2VzXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jLmVhY2hTZXJpZXMoYWxpYXNlcywgZnVuY3Rpb24oYWxpYXNfaWQsIGNhbGxiYWNrMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgSW5nZW5pY28uYWRkTWlncmF0aW9uTG9nKCdJbXBvcnQgYWxpYXMgIycgKyBhbGlhc19pZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEltcG9ydCBBbGlhc1xuICAgICAgICAgICAgICAgICAgICAgICAgJC5hamF4KHdpbmRvdy5taWdyYXRpb25fYWpheF91cmwsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ2ltcG9ydF9hbGlhcycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWFzX2lkOiBhbGlhc19pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkuZG9uZShmdW5jdGlvbihkYXRhMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluZ2VuaWNvLmFkZE1pZ3JhdGlvbkxvZygnQWxpYXMgIycgKyBhbGlhc19pZCArICcgd2FzIGltcG9ydGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5hbHdheXMoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWFzZXNfaW1wb3J0ZWQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhbGlhc2VzX2ltcG9ydGVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhbGlhc2VzX2NvdW50KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlMSA9IE1hdGguZmxvb3IoYWxpYXNlc19pbXBvcnRlZCAvIGFsaWFzZXNfY291bnQgKiAxMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNhbGlhc2VzX3Byb2dyZXNzJykuY3NzKCd3aWR0aCcsIHZhbHVlMSArICclJykuYXR0cignYXJpYS12YWx1ZW5vdycsIHZhbHVlMSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazEoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdGVwNjogZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgSW5nZW5pY28uZG9NaWdyYXRpb25BY3Rpb24oJ2ZpbmlzaCcsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyLCByZXN1bHRzKSB7XG4gICAgICAgICAgICAvLyByZXN1bHRzIGlzIG5vdyBlcXVhbCB0bzoge29uZTogMSwgdHdvOiAyfVxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0cyk7XG4gICAgICAgICAgICBJbmdlbmljby5hZGRNaWdyYXRpb25Mb2coJ0ZpbmlzaGVkJyk7XG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5cbiQoZnVuY3Rpb24oKSB7XG4gICAgSW5nZW5pY28uaW5pdCgpO1xufSk7XG4iXX0=
