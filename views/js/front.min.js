"use strict";const Ingenico={init:function(){$(".ingenico-confirmation .payment-title").click(function(){let n=$(this).closest("li").find(".payment-content").first();if(n.is(":visible")?n.slideUp():n.slideDown(400,function(){n.css("display","block")}),n.is("iframe")&&!n.data("loaded")){let i=n.data("src");n.prop("src",i),n[0].onload=function(){n.data("loaded","true")}}})},setEnvironment:function(){const n=Ingenico.getBrowserData();for(let i in n)Ingenico.setCookie(i,n[i],2)},getBrowserData:function(){return{browserColorDepth:window.screen.colorDepth,browserJavaEnabled:navigator.javaEnabled(),browserLanguage:navigator.language,browserScreenHeight:window.screen.height,browserScreenWidth:window.screen.width,browserTimeZone:(new Date).getTimezoneOffset()}},setCookie:function(n,i,e){let t=new Date;t.setTime(t.getTime()+864e5*e),document.cookie=n+"="+i+";path=/;expires="+t.toGMTString()},inlineFailure:function(n,i,e,t,o){let c=$(".ingenico-cc-form iframe#ingenico_iframe"),a=$(".ingenico-cc-form div.cc-helper-text");c.hide(),a.html(i),$("#ingenico-cc-iframe-retry").on("click",function(n){n.stopPropagation(),a.html(""),c.show(),document.getElementById("ingenico_iframe").src=o})}};window.IngenicoCCInline={iframe:null,wrap:null,oc_wrap:null,tos:null,init:function(){var n=this;this.iframe=$("iframe#ingenico_iframe"),this.wrap=$(".iframe-wrap"),this.oc_wrap=$(".one-click-wrap"),this.tos=$('#conditions-to-approve input[type="checkbox"]'),this.tos.length>0&&this.watchTos(),$(document).on("click",'.payment-options [name="payment-option"]',function(){$("#pay-with-"+$(this).prop("id")+"-form").find(n.iframe).length>0?setTimeout(function(){n.hideConfirmationButton()},1500):n.showConfirmationButton()}),$(document).on("click",'.payment-options input[name="alias"]',function(){0!==n.iframe.length&&("new"===$(this).val()?(n.showOneClickIframe(),n.hideConfirmationButton()):(n.hideOneClickIframe(),n.showConfirmationButton()))})},watchTos:function(){var n=this;n.tos.length>0&&setInterval(function(){n.tos.is(":checked")?n.showIframe():n.hideIframe()},500)},hideIframe:function(){this.wrap.hide()},showIframe:function(){this.wrap.show()},hideOneClickIframe:function(){this.oc_wrap.hide()},showOneClickIframe:function(){this.oc_wrap.show()},hideConfirmationButton:function(){$("#payment-confirmation button").hide()},showConfirmationButton:function(){$("#payment-confirmation button").show()}},$(function(){Ingenico.init(),Ingenico.setEnvironment()}),jQuery(document).ready(function(n){n(document).on("ingenico:inline:failure","body",function(n,i,e,t,o){Ingenico.inlineFailure(n,i,e,t,o)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyb250LmpzIl0sIm5hbWVzIjpbIkluZ2VuaWNvIiwiaW5pdCIsIiQiLCJjbGljayIsImJsb2NrIiwidGhpcyIsImNsb3Nlc3QiLCJmaW5kIiwiZmlyc3QiLCJpcyIsInNsaWRlVXAiLCJzbGlkZURvd24iLCJjc3MiLCJkYXRhIiwic3JjIiwicHJvcCIsIm9ubG9hZCIsInNldEVudmlyb25tZW50IiwiZ2V0QnJvd3NlckRhdGEiLCJlbGVtIiwic2V0Q29va2llIiwiYnJvd3NlckNvbG9yRGVwdGgiLCJ3aW5kb3ciLCJzY3JlZW4iLCJjb2xvckRlcHRoIiwiYnJvd3NlckphdmFFbmFibGVkIiwibmF2aWdhdG9yIiwiamF2YUVuYWJsZWQiLCJicm93c2VyTGFuZ3VhZ2UiLCJsYW5ndWFnZSIsImJyb3dzZXJTY3JlZW5IZWlnaHQiLCJoZWlnaHQiLCJicm93c2VyU2NyZWVuV2lkdGgiLCJ3aWR0aCIsImJyb3dzZXJUaW1lWm9uZSIsIkRhdGUiLCJnZXRUaW1lem9uZU9mZnNldCIsIm5hbWUiLCJ2YWx1ZSIsImRheXMiLCJkIiwic2V0VGltZSIsImdldFRpbWUiLCJkb2N1bWVudCIsImNvb2tpZSIsInRvR01UU3RyaW5nIiwiaW5saW5lRmFpbHVyZSIsImUiLCJtc2ciLCJhbGlhc0lkIiwiY2FyZEJyYW5kIiwiaWZyYW1lVXJsIiwiaW5nZW5pY29DY0lGcmFtZSIsImluZ2VuaWNvQ2NIZWxwZXIiLCJoaWRlIiwiaHRtbCIsIm9uIiwiZXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJzaG93IiwiZ2V0RWxlbWVudEJ5SWQiLCJJbmdlbmljb0NDSW5saW5lIiwiaWZyYW1lIiwid3JhcCIsIm9jX3dyYXAiLCJ0b3MiLCJzZWxmIiwibGVuZ3RoIiwid2F0Y2hUb3MiLCJzZXRUaW1lb3V0IiwiaGlkZUNvbmZpcm1hdGlvbkJ1dHRvbiIsInNob3dDb25maXJtYXRpb25CdXR0b24iLCJ2YWwiLCJzaG93T25lQ2xpY2tJZnJhbWUiLCJoaWRlT25lQ2xpY2tJZnJhbWUiLCJz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LFFBQVFWLFFBTWpCbUIsbUJBQW9CLFdBQ2hCcEUsS0FBSzJELFFBQVFMLFFBTWpCVyx1QkFBd0IsV0FDcEJwRSxFQUFFLGdDQUFnQ29ELFFBTXRDaUIsdUJBQXdCLFdBQ3BCckUsRUFBRSxnQ0FBZ0N5RCxTQUkxQ3pELEVBQUUsV0FDRUYsU0FBU0MsT0FDVEQsU0FBU2lCLG1CQUdiNkQsT0FBT25DLFVBQVVvQyxNQUFNLFNBQVU3RSxHQUM3QkEsRUFBRXlDLFVBQVVhLEdBQUcsMEJBQTJCLE9BQVEsU0FBU1QsRUFBR0MsRUFBS0MsRUFBU0MsRUFBVzhCLEdBQ25GaEYsU0FBUzhDLGNBQWNDLEVBQUdDLEVBQUtDLEVBQVNDLEVBQVc4QiIsImZpbGUiOiJmcm9udC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIDIwMDctMjAyMSBJbmdlbmljb1xuICpcbiAqIE5PVElDRSBPRiBMSUNFTlNFXG4gKlxuICogVGhpcyBzb3VyY2UgZmlsZSBpcyBzdWJqZWN0IHRvIHRoZSBBY2FkZW1pYyBGcmVlIExpY2Vuc2UgKEFGTCAzLjApXG4gKiB0aGF0IGlzIGJ1bmRsZWQgd2l0aCB0aGlzIHBhY2thZ2UgaW4gdGhlIGZpbGUgTElDRU5TRS50eHQuXG4gKiBJdCBpcyBhbHNvIGF2YWlsYWJsZSB0aHJvdWdoIHRoZSB3b3JsZC13aWRlLXdlYiBhdCB0aGlzIFVSTDpcbiAqIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9hZmwtMy4wLnBocFxuICogSWYgeW91IGRpZCBub3QgcmVjZWl2ZSBhIGNvcHkgb2YgdGhlIGxpY2Vuc2UgYW5kIGFyZSB1bmFibGUgdG9cbiAqIG9idGFpbiBpdCB0aHJvdWdoIHRoZSB3b3JsZC13aWRlLXdlYiwgcGxlYXNlIHNlbmQgYW4gZW1haWxcbiAqIHRvIGNvbnRhY3RAaW5nZW5pY28uY29tIHdlIGNhbiBzZW5kIHlvdSBhIGNvcHkgaW1tZWRpYXRlbHkuXG4gKlxuICogIEBhdXRob3IgICAgSW5nZW5pY28gPGNvbnRhY3RAaW5nZW5pY28uY29tPlxuICogIEBjb3B5cmlnaHQgMjAwNy0yMDIxIEluZ2VuaWNvXG4gKiAgQGxpY2Vuc2UgICBodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvYWZsLTMuMC5waHAgIEFjYWRlbWljIEZyZWUgTGljZW5zZSAoQUZMIDMuMClcbiAqL1xuXCJ1c2Ugc3RyaWN0XCJcblxuY29uc3QgSW5nZW5pY28gPSB7XG5cbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy5pbmdlbmljby1jb25maXJtYXRpb24gLnBheW1lbnQtdGl0bGUnKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGxldCBibG9jayA9ICQodGhpcykuY2xvc2VzdCgnbGknKS5maW5kKCcucGF5bWVudC1jb250ZW50JykuZmlyc3QoKTtcbiAgICAgICAgICAgIGlmIChibG9jay5pcygnOnZpc2libGUnKSkge1xuICAgICAgICAgICAgICAgIGJsb2NrLnNsaWRlVXAoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYmxvY2suc2xpZGVEb3duKDQwMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBibG9jay5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gTG9hZCBpZnJhbWVcbiAgICAgICAgICAgIGlmIChibG9jay5pcygnaWZyYW1lJykgJiYgIWJsb2NrLmRhdGEoJ2xvYWRlZCcpKSB7XG4gICAgICAgICAgICAgICAgbGV0IHNyYyA9IGJsb2NrLmRhdGEoJ3NyYycpO1xuICAgICAgICAgICAgICAgIGJsb2NrLnByb3AoJ3NyYycsIHNyYyk7XG4gICAgICAgICAgICAgICAgYmxvY2tbMF0ub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsb2NrLmRhdGEoJ2xvYWRlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHNldEVudmlyb25tZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBJbmdlbmljby5nZXRCcm93c2VyRGF0YSgpO1xuICAgICAgICBmb3IgKGxldCBlbGVtIGluIGRhdGEpIHtcbiAgICAgICAgICAgIEluZ2VuaWNvLnNldENvb2tpZShlbGVtLCBkYXRhW2VsZW1dLCAyKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBnZXRCcm93c2VyRGF0YTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgJ2Jyb3dzZXJDb2xvckRlcHRoJzogd2luZG93LnNjcmVlbi5jb2xvckRlcHRoLFxuICAgICAgICAgICAgJ2Jyb3dzZXJKYXZhRW5hYmxlZCc6IG5hdmlnYXRvci5qYXZhRW5hYmxlZCgpLFxuICAgICAgICAgICAgJ2Jyb3dzZXJMYW5ndWFnZSc6IG5hdmlnYXRvci5sYW5ndWFnZSxcbiAgICAgICAgICAgICdicm93c2VyU2NyZWVuSGVpZ2h0Jzogd2luZG93LnNjcmVlbi5oZWlnaHQsXG4gICAgICAgICAgICAnYnJvd3NlclNjcmVlbldpZHRoJzogd2luZG93LnNjcmVlbi53aWR0aCxcbiAgICAgICAgICAgICdicm93c2VyVGltZVpvbmUnOiAobmV3IERhdGUoKSkuZ2V0VGltZXpvbmVPZmZzZXQoKVxuICAgICAgICB9O1xuICAgIH0sXG5cbiAgICBzZXRDb29raWU6IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBkYXlzKSB7XG4gICAgICAgIGxldCBkID0gbmV3IERhdGU7XG4gICAgICAgIGQuc2V0VGltZShkLmdldFRpbWUoKSArIDI0KjYwKjYwKjEwMDAqZGF5cyk7XG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyBcIj1cIiArIHZhbHVlICsgXCI7cGF0aD0vO2V4cGlyZXM9XCIgKyBkLnRvR01UU3RyaW5nKCk7XG4gICAgfSxcblxuICAgIGlubGluZUZhaWx1cmU6IGZ1bmN0aW9uIChlLCBtc2csIGFsaWFzSWQsIGNhcmRCcmFuZCwgaWZyYW1lVXJsKSB7XG4gICAgICAgIGxldCBpbmdlbmljb0NjSUZyYW1lID0gJCgnLmluZ2VuaWNvLWNjLWZvcm0gaWZyYW1lI2luZ2VuaWNvX2lmcmFtZScpO1xuICAgICAgICBsZXQgaW5nZW5pY29DY0hlbHBlciA9ICQoJy5pbmdlbmljby1jYy1mb3JtIGRpdi5jYy1oZWxwZXItdGV4dCcpO1xuXG4gICAgICAgIGluZ2VuaWNvQ2NJRnJhbWUuaGlkZSgpO1xuICAgICAgICBpbmdlbmljb0NjSGVscGVyLmh0bWwobXNnKTtcblxuICAgICAgICAkKCcjaW5nZW5pY28tY2MtaWZyYW1lLXJldHJ5Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIC8vIFByZXZlbnQgUHJlc3RhU2hvcCBjb2xsYXBzaW5nIHN0ZXAgNCBpbiB0aGUgY2hlY2tvdXRcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgICAgICBpbmdlbmljb0NjSGVscGVyLmh0bWwoJycpO1xuXG4gICAgICAgICAgICAvLyBSZWxvYWQgdGhlIGlGcmFtZVxuICAgICAgICAgICAgaW5nZW5pY29DY0lGcmFtZS5zaG93KCk7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5nZW5pY29faWZyYW1lJykuc3JjID0gaWZyYW1lVXJsO1xuICAgICAgICB9KTtcbiAgICB9LFxufTtcblxud2luZG93LkluZ2VuaWNvQ0NJbmxpbmUgPSB7XG4gICAgaWZyYW1lOiBudWxsLFxuICAgIHdyYXA6IG51bGwsXG4gICAgb2Nfd3JhcDogbnVsbCxcbiAgICB0b3M6IG51bGwsXG5cbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuaWZyYW1lID0gJCgnaWZyYW1lI2luZ2VuaWNvX2lmcmFtZScpO1xuICAgICAgICB0aGlzLndyYXAgPSAkKCcuaWZyYW1lLXdyYXAnKTtcbiAgICAgICAgdGhpcy5vY193cmFwID0gJCgnLm9uZS1jbGljay13cmFwJyk7XG4gICAgICAgIHRoaXMudG9zID0gJCgnI2NvbmRpdGlvbnMtdG8tYXBwcm92ZSBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKTtcblxuICAgICAgICAvLyBIaWRlIGlmcmFtZSBpZiBUb1MgaGFzIGJlZW4gdW5jaGVja2VkXG4gICAgICAgIGlmICh0aGlzLnRvcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLndhdGNoVG9zKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBIaWRlIFwicGF5bWVudCBjb25maXJtYXRpb25cIiBvbiB0aGUgY2hlY2tvdXQgcGFnZSB3aGVuIGNjIGZvcm0gY2hvc2VuXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcucGF5bWVudC1vcHRpb25zIFtuYW1lPVwicGF5bWVudC1vcHRpb25cIl0nLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIElmIElubGluZSBDQyBtb2RlIGlzIGFjdGl2ZVxuICAgICAgICAgICAgaWYgKCQoJyNwYXktd2l0aC0nICsgJCh0aGlzKS5wcm9wKCdpZCcpICsgJy1mb3JtJykuZmluZChzZWxmLmlmcmFtZSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmhpZGVDb25maXJtYXRpb25CdXR0b24oKTtcbiAgICAgICAgICAgICAgICB9LCAxNTAwKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZi5zaG93Q29uZmlybWF0aW9uQnV0dG9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFRvZ2dsZSBDQ0Zvcm0gb24gYWxpYXMgc2VsZWN0aW9uXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcucGF5bWVudC1vcHRpb25zIGlucHV0W25hbWU9XCJhbGlhc1wiXScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGNjIGlmcmFtZSBpcyBleGlzdHNcbiAgICAgICAgICAgIGlmIChzZWxmLmlmcmFtZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICgkKHRoaXMpLnZhbCgpID09PSAnbmV3Jykge1xuICAgICAgICAgICAgICAgIHNlbGYuc2hvd09uZUNsaWNrSWZyYW1lKCk7XG4gICAgICAgICAgICAgICAgc2VsZi5oaWRlQ29uZmlybWF0aW9uQnV0dG9uKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGYuaGlkZU9uZUNsaWNrSWZyYW1lKCk7XG4gICAgICAgICAgICAgICAgc2VsZi5zaG93Q29uZmlybWF0aW9uQnV0dG9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBXYXRjaCBcIlRlcm1zIG9mIHNlcnZpY2VcIiBhbmQgc2hvd3Mgb3IgaGlkZXMgaWZyYW1lIGRlcGVuZHMgb24gdGhlIGNoZWNrYm94XG4gICAgICovXG4gICAgd2F0Y2hUb3M6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIGlmIChzZWxmLnRvcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYudG9zLmlzKCc6Y2hlY2tlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvd0lmcmFtZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaGlkZUlmcmFtZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSGlkZSBDQyBJZnJhbWVcbiAgICAgKi9cbiAgICBoaWRlSWZyYW1lOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMud3JhcC5oaWRlKCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNob3cgQ0MgSWZyYW1lXG4gICAgICovXG4gICAgc2hvd0lmcmFtZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLndyYXAuc2hvdygpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBIaWRlIFwiT25lIENsaWNrXCIgaWZyYW1lXG4gICAgICovXG4gICAgaGlkZU9uZUNsaWNrSWZyYW1lOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMub2Nfd3JhcC5oaWRlKCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNob3cgXCJPbmUgQ2xpY2tcIiBpZnJhbWVcbiAgICAgKi9cbiAgICBzaG93T25lQ2xpY2tJZnJhbWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5vY193cmFwLnNob3coKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSGlkZSBDb25maXJtYXRpb24gQnV0dG9uXG4gICAgICovXG4gICAgaGlkZUNvbmZpcm1hdGlvbkJ1dHRvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcjcGF5bWVudC1jb25maXJtYXRpb24gYnV0dG9uJykuaGlkZSgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTaG93IENvbmZpcm1hdGlvbiBCdXR0b25cbiAgICAgKi9cbiAgICBzaG93Q29uZmlybWF0aW9uQnV0dG9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJyNwYXltZW50LWNvbmZpcm1hdGlvbiBidXR0b24nKS5zaG93KCk7XG4gICAgfVxufTtcblxuJChmdW5jdGlvbigpIHtcbiAgICBJbmdlbmljby5pbml0KCk7XG4gICAgSW5nZW5pY28uc2V0RW52aXJvbm1lbnQoKTtcbn0pO1xuXG5qUXVlcnkoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgkKSB7XG4gICAgJChkb2N1bWVudCkub24oJ2luZ2VuaWNvOmlubGluZTpmYWlsdXJlJywgJ2JvZHknLCBmdW5jdGlvbihlLCBtc2csIGFsaWFzSWQsIGNhcmRCcmFuZCwgdXJsKSB7XG4gICAgICAgIEluZ2VuaWNvLmlubGluZUZhaWx1cmUoZSwgbXNnLCBhbGlhc0lkLCBjYXJkQnJhbmQsIHVybCk7XG4gICAgfSk7XG59KTsiXX0=
