{"version":3,"sources":["order-actions.js"],"names":["jQuery","document","ready","$","on","e","preventDefault","this","closest","removeClass","hide","Ingenico","openModal","el","target","addClass","post","ingenico_api_url","ajax","action","orderId","val","paymentId","captureAmount","done","response","status","alert","message","self","location","href","URL","refundAmount"],"mappings":"AACAA,OAAOC,UAAUC,MAAM,SAAUC,GAE7BA,EAAEF,UAAUG,GAAG,QAAS,aAAc,SAAUC,GAC5CA,EAAEC,iBACUH,EAAEI,MAAMC,QAAQ,UACtBC,YAAY,MAAMC,SAI5BP,EAAEF,UAAUG,GAAG,QAAS,qCAAsC,SAAUC,GACpEA,EAAEC,iBACFK,SAASC,UAAU,gCAGvBT,EAAEF,UAAUG,GAAG,QAAS,0BAA2B,SAAUC,GACzDA,EAAEC,iBAEF,MAAMO,EAAKV,EAAEE,EAAES,QACfD,EAAGE,SAAS,YACZZ,EAAEa,KAAKC,iBAAkB,CACrBC,MAAM,EACNC,OAAQ,UACRC,QAASjB,EAAE,sBAAsBkB,MACjCC,UAAWnB,EAAE,oBAAoBkB,MACjCE,cAAepB,EAAE,mBAAmBkB,QACrCG,KAAK,SAAUC,GAEd,GADAZ,EAAGJ,YAAY,YACS,OAApBgB,EAASC,OAET,OADAC,MAAM,UAAYF,EAASG,UACpB,EAGXD,MAAMF,EAASG,SACfC,KAAKC,SAASC,KAAO9B,SAAS+B,QAKtC7B,EAAEF,UAAUG,GAAG,QAAS,0CAA2C,SAAUC,GACzEA,EAAEC,iBAEF,MAAMO,EAAKV,EAAEE,EAAES,QAEfD,EAAGE,SAAS,YACZZ,EAAEa,KAAKC,iBAAkB,CACrBC,MAAM,EACNC,OAAQ,SACRC,QAASjB,EAAE,sBAAsBkB,MACjCC,UAAWnB,EAAE,oBAAoBkB,QAClCG,KAAK,SAAUC,GAEd,GADAZ,EAAGJ,YAAY,YACS,OAApBgB,EAASC,OAET,OADAC,MAAM,UAAYF,EAASG,UACpB,EAEXD,MAAMF,EAASG,SACfC,KAAKC,SAASC,KAAO9B,SAAS+B,QAKtC7B,EAAEF,UAAUG,GAAG,QAAS,mCAAoC,SAAUC,GAClEA,EAAEC,iBACFK,SAASC,UAAU,kBAGvBT,EAAEF,UAAUG,GAAG,QAAS,0BAA2B,SAAUC,GACzDA,EAAEC,iBACFK,SAASC,UAAU,+BAGvBT,EAAEF,UAAUG,GAAG,QAAS,yBAA0B,SAAUC,GACxDA,EAAEC,iBAEF,MAAMO,EAAKV,EAAEE,EAAES,QACfD,EAAGE,SAAS,YACZZ,EAAEa,KAAKC,iBAAkB,CACrBC,MAAM,EACNC,OAAQ,SACRC,QAASjB,EAAE,sBAAsBkB,MACjCC,UAAWnB,EAAE,oBAAoBkB,MACjCY,aAAc9B,EAAE,kBAAkBkB,QACnCG,KAAK,SAAUC,GAEd,GADAZ,EAAGJ,YAAY,YACS,OAApBgB,EAASC,OACT,MAAwB,oBAApBD,EAASC,QACTf,SAASC,UAAU,wBACZ,IAGXe,MAAM,UAAYF,EAASG,UACpB,GAGXD,MAAMF,EAASG,SACfC,KAAKC,SAASC,KAAO9B,SAAS+B","file":"order-actions.min.js","sourcesContent":["/* global ingenico_api_url */\njQuery(document).ready(function ($) {\n    // Close Button\n    $(document).on('click', '.btn-close', function (e) {\n        e.preventDefault();\n        let modal = $(this).closest('.modal');\n        modal.removeClass('in').hide();\n    });\n\n    // Capture Button\n    $(document).on('click', '#process-capture, .btn-ing-capture', function (e) {\n        e.preventDefault();\n        Ingenico.openModal('capture-confirmation-modal');\n    });\n\n    $(document).on('click', '#process-capture-action', function (e) {\n        e.preventDefault();\n\n        const el = $(e.target);\n        el.addClass('disabled');\n        $.post(ingenico_api_url, {\n            ajax: true,\n            action: 'capture',\n            orderId: $('#ingenico_order_id').val(),\n            paymentId: $('#ingenico_pay_id').val(),\n            captureAmount: $('#capture_amount').val()\n        }).done(function (response) {\n            el.removeClass('disabled');\n            if (response.status !== 'ok') {\n                alert('Error: ' + response.message);\n                return false;\n            }\n\n            alert(response.message);\n            self.location.href = document.URL;\n        });\n    });\n\n    // Cancel Button\n    $(document).on('click', '#process-cancel-action, .btn-ing-cancel', function (e) {\n        e.preventDefault();\n\n        const el = $(e.target);\n\n        el.addClass('disabled');\n        $.post(ingenico_api_url, {\n            ajax: true,\n            action: 'cancel',\n            orderId: $('#ingenico_order_id').val(),\n            paymentId: $('#ingenico_pay_id').val(),\n        }).done(function (response) {\n            el.removeClass('disabled');\n            if (response.status !== 'ok') {\n                alert('Error: ' + response.message);\n                return false;\n            }\n            alert(response.message);\n            self.location.href = document.URL;\n        });\n    });\n\n    // Refund Button\n    $(document).on('click', '#process-refund, .btn-ing-refund', function (e) {\n        e.preventDefault();\n        Ingenico.openModal('refund-modal');\n    });\n\n    $(document).on('click', '#process-perform-refund', function (e) {\n        e.preventDefault();\n        Ingenico.openModal('refund-confirmation-modal');\n    });\n\n    $(document).on('click', '#process-refund-action', function (e) {\n        e.preventDefault();\n\n        const el = $(e.target);\n        el.addClass('disabled');\n        $.post(ingenico_api_url, {\n            ajax: true,\n            action: 'refund',\n            orderId: $('#ingenico_order_id').val(),\n            paymentId: $('#ingenico_pay_id').val(),\n            refundAmount: $('#refund_amount').val()\n        }).done(function (response) {\n            el.removeClass('disabled');\n            if (response.status !== 'ok') {\n                if (response.status === 'action_required') {\n                    Ingenico.openModal('refund-failed-modal');\n                    return false;\n                }\n\n                alert('Error: ' + response.message);\n                return false;\n            }\n\n            alert(response.message);\n            self.location.href = document.URL;\n        });\n    });\n});"]}